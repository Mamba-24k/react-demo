(this["webpackJsonpmy-react-demo"]=this["webpackJsonpmy-react-demo"]||[]).push([[0],{1132:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(31),c=a.n(o),i=a(95),l=(a(520),a(521),a(61)),s=(a(72),a(20)),u=(a(122),a(56)),d=(a(161),a(42)),m=a(6),p=a(1148),f=a(1146),h=a(75),g=(a(530),a(245)),b=a.n(g),v=(a(123),a(57)),y=a(477),E=a.n(y),w={loginApi:{method:"post",url:"/manage/login"},listCategoryApi:{method:"get",url:"/manage/category/list"},addCategoryApi:{method:"post",url:"/manage/category/add"},updateCategoryApi:{method:"post",url:"/manage/category/update"},searchListProductApi:{method:"get",url:"/manage/product/search"},listProductApi:{method:"get",url:"/manage/product/list"},addProductApi:{method:"post",url:"/manage/product/add"},updateProductApi:{method:"post",url:"/manage/product/update"},productStatusApi:{method:"post",url:"/manage/product/updateStatus"},listUserApi:{method:"get",url:"/manage/user/list"},addUserApi:{method:"post",url:"/manage/user/add"},updateUserApi:{method:"post",url:"/manage/user/update"},deleteUserApi:{method:"post",url:"/manage/user/delete"},listRoleApi:{method:"get",url:"/manage/role/list"},addRoleApi:{method:"post",url:"/manage/role/add"},updateRoleApi:{method:"post",url:"/manage/role/update"},deleteRoleApi:{method:"post",url:"/manage/role/delete"},deleteImgApi:{method:"post",url:"/manage/img/delete"}};console.log(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}));var k=E.a.create({baseURL:"",timeout:1e4,withCredentials:!1});k.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),k.interceptors.response.use((function(e){return e.data}),(function(e){return e.response.data.message&&v.b.error(e.response.data.message),e.response.status,Promise.reject(e)}));var O=function(e,t){var a=w[e].method,n=w[e].url,r={};return"get"===a||"delete"===a?r={params:t}:"post"!==a&&"put"!==a&&"patch"!==a||(r=t),new Promise((function(e,t){k[a](n,r).then((function(t){e(t)})).catch((function(e){t(e)}))}))},C=function(e){return{type:"increase",data:e}},S=function(e,t,a){return t?t.length<4?Promise.reject("\u5bc6\u7801\u957f\u5ea6\u4e0d\u80fd\u5c0f\u4e8e4\u4f4d"):t.length>12?Promise.reject("\u5bc6\u7801\u957f\u5ea6\u4e0d\u80fd\u5927\u4e8e12\u4f4d"):/^[a-zA-Z0-9_]+$/.test(t)?Promise.resolve():Promise.reject("\u5bc6\u7801\u5fc5\u987b\u662f\u82f1\u6587\u3001\u6570\u5b57\u6216\u4e0b\u5212\u7ebf\u7ec4\u6210"):Promise.reject("\u5bc6\u7801\u5fc5\u987b\u8f93\u5165")},j=Object(h.b)((function(e){return{userInfo:e.user}}),{asyncSetUser:function(e){return function(t){O("loginApi",e).then((function(e){0===e.status?(v.b.success("\u767b\u9646\u6210\u529f"),localStorage.userInfo=JSON.stringify(e.data),t(function(e){return{type:"set_user",data:e}}(e.data))):1===e.status&&v.b.error(e.msg)}))}}})((function(e){var t=e.userInfo||{};if(t&&t._id)return r.a.createElement(l.a,{to:"/"});var a=d.a.useForm(),n=Object(m.a)(a,1)[0];return r.a.createElement("div",{className:"login-box"},r.a.createElement("header",{className:"login-header"},r.a.createElement("img",{src:b.a,alt:"logo"}),r.a.createElement("h1",null,"React\u9879\u76ee\uff1a\u540e\u53f0\u7ba1\u7406\u7cfb\u7edf")),r.a.createElement("section",{className:"login-content"},r.a.createElement("h2",null,"\u7528\u6237\u767b\u9646"),r.a.createElement(d.a,{className:"login-form",form:n,onFinish:function(t){console.log(n),console.log(t),n.validateFields().then((function(t){console.log(t),e.asyncSetUser(t)})).catch((function(e){console.log(e)}))}},r.a.createElement(d.a.Item,{name:"username",hasFeedback:!0,rules:[{required:!0,whitespace:!0,message:"Please input your Username!"}]},r.a.createElement(u.a,{prefix:r.a.createElement(p.a,null),placeholder:"Username"})),r.a.createElement(d.a.Item,{name:"password",hasFeedback:!0,rules:[{required:!0,whitespace:!0,validator:S}]},r.a.createElement(u.a.Password,{prefix:r.a.createElement(f.a,null),placeholder:"Password"})),r.a.createElement(d.a.Item,null,r.a.createElement(s.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"\u767b\u9646")))))})),I=a(10),x=a(12),R=a(13),F=a(46),A=(a(646),a(181)),P=(a(648),a(21)),L=a.n(P),N=a(51),_=(a(185),a(77)),U=a(117),D=a.n(U),T=a(482),q=a.n(T),H=function(e){return new Promise((function(t,a){var n="http://api.map.baidu.com/telematics/v3/weather?location=".concat(e,"&output=json&ak=3p49MVra6urFRGOT9s8UBWr2");q()(n,{},(function(e,n){if(e||"success"!==n.status)a(n);else{var r=n.results[0].weather_data[0],o=r.dayPictureUrl,c=r.weather,i=r.temperature;t({dayPictureUrl:o,weather:c,temperature:i})}}))}))},M=Object(h.b)((function(e){return{currentTitle:e.headTitle,userInfo:e.user}}),{clearUser:function(e){return localStorage.removeItem("userInfo"),{type:"clear_user",data:e}}})((function(e){var t=Object(n.useState)(""),a=Object(m.a)(t,2),o=a[0],c=a[1],i=Object(n.useState)({}),l=Object(m.a)(i,2),s=l[0],u=l[1],d=e.currentTitle,p=(e.userInfo||{}).username;return Object(n.useEffect)((function(){var e=setTimeout((function(){c((function(){return D()(new Date).format("YYYY-MM-DD HH:mm:ss")}))}),1e3);return function(){clearTimeout(e)}}),[o]),Object(n.useEffect)((function(){function e(){return(e=Object(N.a)(L.a.mark((function e(){var t;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H("\u676d\u5dde");case 2:t=e.sent,u(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),r.a.createElement("div",{className:"header-box"},r.a.createElement("div",{className:"header-top"},r.a.createElement("span",null,"Hello! ",p),r.a.createElement("a",{href:"#!",rel:"noopener noreferrer",onClick:function(){return function(e){_.a.confirm({title:"\u786e\u8ba4\u9000\u51fa?",onOk:function(){e.clearUser()},onCancel:function(){console.log("Cancel")}})}(e)}},"\u9000\u51fa")),r.a.createElement("div",{className:"header-bottom"},r.a.createElement("div",{className:"bottom-left"},d),r.a.createElement("div",{className:"bottom-right"},r.a.createElement("span",null,o),r.a.createElement("img",{src:s.dayPictureUrl,alt:"weather"}),r.a.createElement("span",null,s.weather),"/",r.a.createElement("span",null,s.temperature))))})),z=(a(348),a(78)),V=a(1147),K=a(1134),Y=a(1135),B=a(1136),J=a(1137),W=a(1138),X=a(1139),Q=a(1140),$=a(1141),Z=[{title:"\u9996\u9875",key:"/",icon:r.a.createElement(V.a,null),isPublic:!0},{title:"\u5546\u54c1",key:"/products",icon:r.a.createElement(K.a,null),children:[{title:"\u54c1\u7c7b\u7ba1\u7406",key:"/category",icon:r.a.createElement(Y.a,null)},{title:"\u5546\u54c1\u7ba1\u7406",key:"/product",icon:r.a.createElement(B.a,null)}]},{title:"\u7528\u6237\u7ba1\u7406",key:"/user",icon:r.a.createElement(p.a,null)},{title:"\u89d2\u8272\u7ba1\u7406",key:"/role",icon:r.a.createElement(J.a,null)},{title:"\u56fe\u5f62\u56fe\u8868",key:"/charts",icon:r.a.createElement(W.a,null),children:[{title:"\u67f1\u5f62\u56fe",key:"/bar",icon:r.a.createElement(X.a,null)},{title:"\u6298\u7ebf\u56fe",key:"/line",icon:r.a.createElement(Q.a,null)},{title:"\u997c\u56fe",key:"/pie",icon:r.a.createElement($.a,null)}]}],G=z.a.SubMenu,ee=function(e){var t="";return Z.forEach((function(a){a.children&&(a.children.find((function(t){return t.key===e}))&&(t=a.key))})),t},te=Object(h.b)((function(e){return{}}),{setHeadTitle:function(e){return{type:"set_head_title",data:e}}})((function(e){console.log(e);var t=e.location.pathname;return 0===t.indexOf("/product")&&(t="/product"),r.a.createElement(z.a,{theme:"dark",mode:"inline",selectedKeys:[t],defaultOpenKeys:[ee(t)]},function e(t,a){var n=a.location.pathname;return t.map((function(t){if(!function(e,t){var a=e.key,n=e.isPublic,r=t.userInfo||{},o=r.username,c=r.role_id?r.role_id.menus:[];return!("admin"!==o&&!n&&-1===c.indexOf(a))||!!e.children&&!!e.children.find((function(e){return-1!==c.indexOf(e.key)}))}(t,a))return!1;if(t.children){var o=t.children.find((function(e){return 0===n.indexOf(e.key)}));return o&&a.setHeadTitle(o.title),r.a.createElement(G,{key:t.key,icon:t.icon,title:t.title},e(t.children,a))}return t.key===n&&a.setHeadTitle(t.title),r.a.createElement(z.a.Item,{key:t.key,icon:t.icon,onClick:function(){return a.setHeadTitle(t.title)}},r.a.createElement(i.b,{to:t.key},t.title))}))}(Z,e))})),ae=(a(671),a(513)),ne=a(8),re=[{path:"",breadcrumbName:"Home"},{path:"category",breadcrumbName:"Category"},{path:"product",breadcrumbName:"Product"},{path:"addUpdate",breadcrumbName:"AddUpdate"},{path:"user",breadcrumbName:"User"},{path:"role",breadcrumbName:"Role"},{path:"bar",breadcrumbName:"Bar"},{path:"line",breadcrumbName:"Line"},{path:"pie",breadcrumbName:"Pie"}];function oe(e){var t=e.currentPath.split("/").filter((function(e){return e}));t.unshift("");var a=[];return t.forEach((function(e){var t=re.filter((function(t){return t.path===e}));a=[].concat(Object(ne.a)(a),Object(ne.a)(t))})),a}function ce(e,t,a,n){return a.indexOf(e)===a.length-1?r.a.createElement("span",null,e.breadcrumbName):r.a.createElement(i.b,{to:n.join("/")},e.breadcrumbName)}var ie=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(ae.a,{style:{margin:"16px 0"},itemRender:ce,routes:oe(e)}))},le=function(e){Object(R.a)(a,e);var t=Object(F.a)(a);function a(e){var n;return Object(I.a)(this,a),(n=t.call(this,e)).increaseCount=function(){var e=1*n.countFormRef.current.value;n.props.increase(e)},n.decreaseCount=function(){var e=1*n.countFormRef.current.value;n.props.decrease(e)},n.oddIncreaseCount=function(){if(n.props.count%2===1){var e=1*n.countFormRef.current.value;n.props.increase(e)}},n.asyncIncreaseCount=function(){var e=1*n.countFormRef.current.value;n.props.asyncIncrease(e)},n.countFormRef=r.a.createRef(),n}return Object(x.a)(a,[{key:"render",value:function(){var e=this.props.count;return r.a.createElement("div",null,r.a.createElement("div",null,e),r.a.createElement("select",{ref:this.countFormRef},r.a.createElement("option",{value:"1"},"1"),r.a.createElement("option",{value:"2"},"2"),r.a.createElement("option",{value:"3"},"3")),r.a.createElement("button",{onClick:this.increaseCount},"\u589e\u52a0"),r.a.createElement("button",{onClick:this.decreaseCount},"\u51cf\u5c11"),r.a.createElement("button",{onClick:this.oddIncreaseCount},"\u5947\u6570\u624d\u589e\u52a0"),r.a.createElement("button",{onClick:this.asyncIncreaseCount},"\u5f02\u6b65\u589e\u52a0"))}}]),a}(n.Component),se=Object(h.b)((function(e){return{count:e.count}}),{increase:C,decrease:function(e){return{type:"decrease",data:e}},asyncIncrease:function(e){return function(t){setTimeout((function(){t(C(e))}),1e3)}}})(le),ue=function(e){Object(R.a)(a,e);var t=Object(F.a)(a);function a(){return Object(I.a)(this,a),t.apply(this,arguments)}return Object(x.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(se,null))}}]),a}(n.Component),de=(a(131),a(69)),me=(a(242),a(137)),pe=(a(213),a(76)),fe=a(1143),he=a(1142),ge=pe.a.Option,be=function(e){Object(R.a)(a,e);var t=Object(F.a)(a);function a(){var e;Object(I.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).addFormRef=r.a.createRef(),e.updateFormRef=r.a.createRef(),e.state={loading:!1,visibleStatus:0,parentId:"0",parentName:"",categoryList:[],subCategoryList:[],categoryId:""},e.initColumns=function(){e.columns=[{title:"\u5206\u7c7b\u7684\u540d\u79f0",dataIndex:"name",key:"name"},{title:"\u64cd\u4f5c",width:300,key:"action",render:function(t){return r.a.createElement("span",null,r.a.createElement(s.a,{type:"link",onClick:function(){return e.showUpdate(t)}},"\u4fee\u6539\u5206\u7c7b"),"0"===e.state.parentId?r.a.createElement(s.a,{type:"link",onClick:function(){return e.handleSubCategory(t)}},"\u67e5\u770b\u5b50\u5206\u7c7b"):null)}}]},e.handleCategory=function(){e.setState({parentId:"0",parentName:""})},e.handleSubCategory=function(t){e.setState({parentId:t._id,parentName:t.name},(function(){e.getCategoryList()}))},e.getCategoryList=Object(N.a)(L.a.mark((function t(){var a;return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),t.next=3,O("listCategoryApi",{parentId:e.state.parentId});case 3:a=t.sent,"0"===e.state.parentId?e.setState({categoryList:a.data,loading:!1}):e.setState({subCategoryList:a.data,loading:!1});case 5:case"end":return t.stop()}}),t)}))),e.showAdd=function(){e.setState({visibleStatus:1}),e.addFormRef.current.setFieldsValue({parentId:e.state.parentId})},e.showUpdate=function(t){e.setState({visibleStatus:2,categoryId:t._id}),e.updateFormRef.current.setFieldsValue({categoryName:t.name,categoryId:t._id})},e.handleCancel=function(){e.setState({visibleStatus:0})},e.addCategory=function(t){console.log(t,e.addFormRef),e.addFormRef.current.validateFields().then((function(t){console.log(t),t.isLeaf="0"!==t.parentId,O("addCategoryApi",t).then((function(t){0===t.status?(v.b.success("\u64cd\u4f5c\u6210\u529f"),e.getCategoryList(),e.handleCancel(),e.addFormRef.current.resetFields()):1===t.status&&v.b.error(t.msg)}))})).catch((function(e){console.log(e)}))},e.updateCategory=function(){e.updateFormRef.current.validateFields().then((function(t){console.log(t),console.log(e.updateFormRef.current.getFieldsValue()),O("updateCategoryApi",{categoryId:e.state.categoryId,categoryName:t.categoryName}).then((function(t){0===t.status?(v.b.success("\u64cd\u4f5c\u6210\u529f"),e.getCategoryList(),e.handleCancel(),e.updateFormRef.current.resetFields()):1===t.status&&v.b.error(t.msg)}))})).catch((function(e){console.log(e)}))},e}return Object(x.a)(a,[{key:"componentDidMount",value:function(){this.initColumns(),this.getCategoryList()}},{key:"render",value:function(){var e=this.state,t=e.parentId,a=e.parentName,n=e.categoryList,o=e.subCategoryList,c=e.visibleStatus,i=e.loading,l="0"===t?"\u4e00\u7ea7\u5206\u7c7b\u5217\u8868":r.a.createElement(r.a.Fragment,null,r.a.createElement(s.a,{type:"link",onClick:this.handleCategory},"\u4e00\u7ea7\u5206\u7c7b\u5217\u8868"),r.a.createElement(fe.a,null),r.a.createElement("span",null,"  ",a,"\u5206\u7c7b\u5217\u8868")),m=r.a.createElement(s.a,{type:"primary",icon:r.a.createElement(he.a,null),onClick:this.showAdd},"\u6dfb\u52a0");return r.a.createElement("div",null,r.a.createElement(de.a,{title:l,extra:m},r.a.createElement(me.a,{bordered:!0,loading:i,rowKey:"_id",dataSource:"0"===t?n:o,columns:this.columns,pagination:{defaultPageSize:10,showQuickJumper:!0,showSizeChanger:!0}})),r.a.createElement(_.a,{title:"\u6dfb\u52a0\u5206\u7c7b",forceRender:!0,visible:1===c,onOk:this.addCategory,onCancel:this.handleCancel},r.a.createElement(d.a,{ref:this.addFormRef,initialValues:{parentId:t}},r.a.createElement(d.a.Item,{name:"parentId",label:"\u6240\u5c5e\u5206\u7c7b",rules:[{required:!0,message:"\u5fc5\u9009"}]},r.a.createElement(pe.a,null,r.a.createElement(ge,{value:"0"},"\u4e00\u7ea7\u5206\u7c7b"),n.map((function(e){return r.a.createElement(ge,{value:e._id,key:e._id},e.name)})))),"\xdf",r.a.createElement(d.a.Item,{name:"categoryName",label:"\u5206\u7c7b\u540d\u79f0",rules:[{required:!0,whitespace:!0,message:"\u5206\u7c7b\u540d\u79f0\u5fc5\u987b\u586b\u5199"}]},r.a.createElement(u.a,{placeholder:"\u8bf7\u8f93\u5165\u5206\u7c7b\u540d\u79f0"})))),r.a.createElement(_.a,{title:"\u4fee\u6539\u5206\u7c7b",forceRender:!0,visible:2===c,onOk:this.updateCategory,onCancel:this.handleCancel},r.a.createElement(d.a,{ref:this.updateFormRef,initialValues:{categoryName:"",categoryId:""}},r.a.createElement(d.a.Item,{name:"categoryName",label:"\u5206\u7c7b\u540d\u79f0",rules:[{required:!0,whitespace:!0,message:"\u5206\u7c7b\u540d\u79f0\u5fc5\u987b\u586b\u5199"}]},r.a.createElement(u.a,{placeholder:"\u8bf7\u8f93\u5165\u5206\u7c7b\u540d\u79f0"})))))}}]),a}(n.Component),ve=a(5),ye=pe.a.Option,Ee=function(e){Object(R.a)(a,e);var t=Object(F.a)(a);function a(e){var n;return Object(I.a)(this,a),(n=t.call(this,e)).initColunms=function(){n.columns=[{title:"\u5546\u54c1\u540d\u79f0",dataIndex:"name"},{title:"\u5546\u54c1\u63cf\u8ff0",dataIndex:"desc"},{title:"\u4ef7\u683c",dataIndex:"price",render:function(e){return"\xa5"+e}},{title:"\u72b6\u6001",width:100,render:function(e){var t=e._id,a=e.status;return r.a.createElement("span",null,r.a.createElement(s.a,{type:"primary",onClick:function(){return n.handleSaleStatus(t,1===a?2:1)}},1===a?"\u4e0b\u67b6":"\u4e0a\u67b6"),r.a.createElement("span",null,1===a?"\u5728\u552e":"\u5df2\u4e0b\u67b6"))}},{title:"\u64cd\u4f5c",width:100,render:function(e){return r.a.createElement("span",null,r.a.createElement(s.a,{type:"link",onClick:function(){return n.props.history.push("/product/addUpdate",e)}},"\u4fee\u6539"),r.a.createElement(s.a,{type:"link",onClick:function(){return n.props.history.push("/product/addUpdate",e)}},"\u8be6\u60c5"))}}]},n.getProductList=Object(N.a)(L.a.mark((function e(){var t,a,r,o,c,i,l,s=arguments;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:1,a=s.length>1&&void 0!==s[1]?s[1]:1,n.setState({loading:!0}),r=n.state,o=r.searchType,c=r.searchName,i=Object(ve.a)({pageNum:t,pageSize:a},o,c),e.next=7,O("searchListProductApi",i);case 7:0===(l=e.sent).status?n.setState({productList:l.data.list,pageNum:t,pageSize:a,total:l.data.total,loading:!1}):v.b.error(l.msg);case 9:case"end":return e.stop()}}),e)}))),n.handleSaleStatus=function(){var e=Object(N.a)(L.a.mark((function e(t,a){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O("productStatusApi",{productId:t,status:a});case 2:0===e.sent.status&&n.getProductList();case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),n.state={total:0,pageNum:e.pageNum||1,pageSize:e.pageSize||1,loading:!1,productList:[],searchType:"productName",searchName:""},n}return Object(x.a)(a,[{key:"componentDidMount",value:function(){this.initColunms(),this.getProductList()}},{key:"render",value:function(){var e=this,t=this.state,a=t.productList,n=t.loading,o=t.pageNum,c=t.pageSize,i=t.total,l=t.searchType,d=t.searchName,m=r.a.createElement("span",null,r.a.createElement(pe.a,{value:l,style:{width:130},onChange:function(t){return e.setState({searchType:t})}},r.a.createElement(ye,{value:"productName"},"\u6309\u540d\u79f0\u6765\u641c\u7d22"),r.a.createElement(ye,{value:"productDesc"},"\u6309\u63cf\u8ff0\u6765\u641c\u7d22")),r.a.createElement(u.a,{value:d,placeholder:"\u5173\u952e\u5b57",onChange:function(t){return e.setState({searchName:t.target.value})},style:{width:200,margin:"0 15px"}}),r.a.createElement(s.a,{type:"primary",onClick:function(){return e.getProductList()}},"\u641c\u7d22")),p=r.a.createElement(s.a,{type:"primary",icon:r.a.createElement(he.a,null),onClick:function(){return e.props.history.push("/product/addUpdate")}},"\u6dfb\u52a0");return r.a.createElement("div",null,r.a.createElement(de.a,{title:m,extra:p},r.a.createElement(me.a,{bordered:!0,pagination:{current:o,pageSize:c,showQuickJumper:!0,showSizeChanger:!0,total:i,onChange:this.getProductList},loading:n,rowKey:"_id",dataSource:a,columns:this.columns})))}}]),a}(n.Component),we=(a(350),a(262)),ke=a(1145),Oe=(a(1133),a(511));function Ce(e){return new Promise((function(t,a){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return a(e)}}))}var Se,je=function(e){Object(R.a)(a,e);var t=Object(F.a)(a);function a(e){var n;Object(I.a)(this,a),(n=t.call(this,e)).getImgs=function(){return n.state.fileList.map((function(e){return e.name}))},n.handleCancel=function(){return n.setState({previewVisible:!1})},n.handlePreview=function(){var e=Object(N.a)(L.a.mark((function e(t){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.url||t.preview){e.next=4;break}return e.next=3,Ce(t.originFileObj);case 3:t.preview=e.sent;case 4:n.setState({previewImage:t.url||t.preview,previewVisible:!0,previewTitle:t.name||t.url.substring(t.url.lastIndexOf("/")+1)});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleChange=function(){var e=Object(N.a)(L.a.mark((function e(t){var a,r,o;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.file,r=t.fileList,console.log(a,r),"done"!==a.status){e.next=7;break}0===(o=a.response).status&&(r[r.length-1].name=o.data.name,r[r.length-1].url=o.data.url),e.next=12;break;case 7:if("removed"!==a.status){e.next=12;break}return e.next=10,O("deleteImgApi",{name:a.name});case 10:0===e.sent.status?v.b.success("\u5220\u9664\u6210\u529f"):v.b.error("\u5220\u9664\u5931\u8d25");case 12:n.setState({fileList:r});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var r=e.imgs,o=[];return r&&r.length>0&&(o=r.map((function(e,t){return{uid:-t,name:e,status:"done",url:"http://localhost:5000/upload/".concat(e)}}))),n.state={previewVisible:!1,previewImage:"",previewTitle:"",fileList:o},n}return Object(x.a)(a,[{key:"render",value:function(){var e=this.state,t=e.previewVisible,a=e.previewImage,n=e.fileList,o=e.previewTitle,c=r.a.createElement("div",null,r.a.createElement(he.a,null),r.a.createElement("div",{className:"ant-upload-text"},"Upload"));return r.a.createElement("div",{className:"clearfix"},r.a.createElement(Oe.a,{action:"/manage/img/upload",listType:"picture-card",accept:"image/*",name:"image",fileList:n,onPreview:this.handlePreview,onChange:this.handleChange},n.length>=3?null:c),r.a.createElement(_.a,{visible:t,title:o,footer:null,onCancel:this.handleCancel},r.a.createElement("img",{alt:"example",style:{width:"100%"},src:a})))}}]),a}(n.Component),Ie=a(499),xe=a(159),Re=a(500),Fe=a.n(Re),Ae=a(501),Pe=a.n(Ae),Le=(a(811),function(e){Object(R.a)(a,e);var t=Object(F.a)(a);function a(e){var n;Object(I.a)(this,a),(n=t.call(this,e)).onEditorStateChange=function(e){n.setState({editorState:e})},n.getDetail=function(){return Fe()(Object(xe.convertToRaw)(n.state.editorState.getCurrentContent()))},n.uploadImageCallBack=function(e){return new Promise((function(t,a){var n=new XMLHttpRequest;n.open("POST","/manage/img/upload"),n.setRequestHeader("Authorization","Client-ID XXXXX");var r=new FormData;r.append("image",e),n.send(r),n.addEventListener("load",(function(){var e=JSON.parse(n.responseText);t({data:{link:e.data.url}})})),n.addEventListener("error",(function(){var e=JSON.parse(n.responseText);a(e)}))}))};var r=n.props.detail;if(console.log(r),r){var o=Pe()(r);if(o){var c=xe.ContentState.createFromBlockArray(o.contentBlocks),i=xe.EditorState.createWithContent(c);n.state={editorState:i}}}else n.state={editorState:xe.EditorState.createEmpty()};return n}return Object(x.a)(a,[{key:"render",value:function(){var e=this.state.editorState;return r.a.createElement("div",null,r.a.createElement(Ie.Editor,{editorState:e,wrapperClassName:"demo-wrapper",editorClassName:"demo-editor",editorStyle:{border:"1px solid #000",minHeight:200,paddingLeft:10},onEditorStateChange:this.onEditorStateChange,toolbar:{inline:{inDropdown:!0},list:{inDropdown:!0},textAlign:{inDropdown:!0},link:{inDropdown:!0},history:{inDropdown:!0},image:{uploadCallback:this.uploadImageCallBack,alt:{present:!0,mandatory:!0}}}}))}}]),a}(n.Component)),Ne=u.a.TextArea,_e={labelCol:{span:3},wrapperCol:{span:21}},Ue=function(e,t,a){return 1*t>0?Promise.resolve():Promise.reject("\u4ef7\u683c\u5fc5\u987b\u5927\u4e8e0")},De=function(e){Object(R.a)(a,e);var t=Object(F.a)(a);function a(e){var n;return Object(I.a)(this,a),(n=t.call(this,e)).productFormRef=r.a.createRef(),n.uploadRef=r.a.createRef(),n.editorRef=r.a.createRef(),n.productInfo=n.props.location.state,n.getCategoryList=function(){var e=Object(N.a)(L.a.mark((function e(t){var a,r,o,c,i;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O("listCategoryApi",{parentId:t});case 2:if(a=e.sent,r=a.data,"0"!==t){e.next=24;break}if(n.setState({options:r}),!n.productInfo){e.next=22;break}if(n.productFormRef.current.setFieldsValue(n.productInfo),o=[],"0"!==n.productInfo.pcategoryId){e.next=13;break}o.push(n.productInfo.categoryId),e.next=21;break;case 13:return o.push(n.productInfo.pcategoryId),o.push(n.productInfo.categoryId),e.next=17,n.getCategoryList(n.productInfo.pcategoryId);case 17:c=e.sent,i=r.find((function(e){return e._id===n.productInfo.pcategoryId})),console.log(i),i.children=c;case 21:n.productFormRef.current.setFieldsValue({categorys:o});case 22:e.next=25;break;case 24:return e.abrupt("return",r);case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.onFinish=function(){n.productFormRef.current.validateFields().then((function(e){console.log(e),1===e.categorys.length?(e.pcategoryId="0",e.categoryId=e.categorys[0]):(e.pcategoryId=e.categorys[0],e.categoryId=e.categorys[1]),e.imgs=n.uploadRef.current.getImgs(),e.detail=n.editorRef.current.getDetail(),n.productInfo&&(e._id=n.productInfo._id);var t=n.productInfo?"updateProductApi":"addProductApi";O(t,e).then((function(e){console.log(e),0===e.status?(v.b.success("\u64cd\u4f5c\u6210\u529f"),n.props.history.goBack()):1===e.status&&v.b.error(e.msg)}))})).catch((function(e){console.log(e)}))},n.onChange=function(e,t){console.log(e,t)},n.loadData=function(){var e=Object(N.a)(L.a.mark((function e(t){var a,r;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),(a=t[t.length-1]).loading=!0,e.next=5,n.getCategoryList(a._id);case 5:r=e.sent,a.loading=!1,r&&r.length>0?a.children=r:a.isLeaf=!0,n.setState({options:Object(ne.a)(n.state.options)});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={options:[]},n}return Object(x.a)(a,[{key:"componentDidMount",value:function(){console.log(this.productInfo),this.getCategoryList("0")}},{key:"render",value:function(){var e=this,t=r.a.createElement("span",null,r.a.createElement(ke.a,{style:{color:"#1DA57A",fontSize:20,marginRight:10},onClick:function(){return e.props.history.goBack()}}),r.a.createElement("span",null,"\u6dfb\u52a0\u5546\u54c1")),a=this.productInfo||{},n=a.imgs,o=a.detail;return console.log(n,o),r.a.createElement(de.a,{title:t},r.a.createElement(d.a,Object.assign({},_e,{ref:this.productFormRef,initialValues:{},onFinish:this.onFinish}),r.a.createElement(d.a.Item,{name:"name",label:"\u5546\u54c1\u540d\u79f0",hasFeedback:!0,rules:[{required:!0,whitespace:!0,message:"Please input your Username!"}]},r.a.createElement(u.a,{placeholder:"\u8bf7\u8f93\u5165\u5546\u54c1\u540d\u79f0"})),r.a.createElement(d.a.Item,{name:"desc",label:"\u5546\u54c1\u63cf\u8ff0",hasFeedback:!0,rules:[{required:!0,whitespace:!0,message:"Please input your Username!"}]},r.a.createElement(Ne,{placeholder:"\u8bf7\u8f93\u5165\u5546\u54c1\u63cf\u8ff0",autoSize:{minRows:2,maxRows:6}})),r.a.createElement(d.a.Item,{name:"price",label:"\u5546\u54c1\u4ef7\u683c",rules:[{required:!0,validator:Ue}]},r.a.createElement(u.a,{type:"number",placeholder:"\u8bf7\u8f93\u5165\u5546\u54c1\u4ef7\u683c",addonAfter:"\u5143"})),r.a.createElement(d.a.Item,{name:"categorys",label:"\u5546\u54c1\u5206\u7c7b",rules:[{required:!0,message:"Please input your Username!"}]},r.a.createElement(we.a,{fieldNames:{label:"name",value:"_id",children:"children"},options:this.state.options,loadData:this.loadData,onChange:this.onChange})),r.a.createElement(d.a.Item,{label:"\u5546\u54c1\u56fe\u7247",hasFeedback:!0,rules:[{required:!0,whitespace:!0,message:"Please input your Username!"}]},r.a.createElement(je,{ref:this.uploadRef,imgs:n})),r.a.createElement(d.a.Item,{label:"\u5546\u54c1\u8be6\u60c5",hasFeedback:!0,rules:[{required:!0,whitespace:!0,message:"Please input your Username!"}]},r.a.createElement(Le,{ref:this.editorRef,detail:o})),r.a.createElement(d.a.Item,{label:" ",colon:!1},r.a.createElement(s.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"\u63d0\u4ea4"))))}}]),a}(n.Component),Te=function(e){Object(R.a)(a,e);var t=Object(F.a)(a);function a(){return Object(I.a)(this,a),t.apply(this,arguments)}return Object(x.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(l.d,null,r.a.createElement(l.b,{path:"/product",exact:!0,component:Ee}),r.a.createElement(l.b,{path:"/product/addUpdate",component:De}),r.a.createElement(l.a,{to:"/product"})))}}]),a}(n.Component),qe={labelCol:{span:4},wrapperCol:{span:20}},He=pe.a.Option,Me=function(e,t,a){return t?t.length<4?Promise.reject("\u5bc6\u7801\u957f\u5ea6\u4e0d\u80fd\u5c0f\u4e8e4\u4f4d"):t.length>12?Promise.reject("\u5bc6\u7801\u957f\u5ea6\u4e0d\u80fd\u5927\u4e8e12\u4f4d"):/^[a-zA-Z0-9_]+$/.test(t)?Promise.resolve():Promise.reject("\u5bc6\u7801\u5fc5\u987b\u662f\u82f1\u6587\u3001\u6570\u5b57\u6216\u4e0b\u5212\u7ebf\u7ec4\u6210"):Promise.reject("\u5bc6\u7801\u5fc5\u987b\u8f93\u5165")},ze=function(e){Object(R.a)(a,e);var t=Object(F.a)(a);function a(){var e;Object(I.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).addFormRef=r.a.createRef(),e.treeFormRef=r.a.createRef(),e.state={loading:!1,usersList:[],user:{},rolesList:[],isShowAdd:!1},e.initColumns=function(){e.columns=[{title:"\u7528\u6237\u540d",dataIndex:"username"},{title:"\u90ae\u7bb1",dataIndex:"email"},{title:"\u7535\u8bdd",dataIndex:"phone"},{title:"\u6ce8\u518c\u65f6\u95f4",dataIndex:"create_time",render:function(e){return D()(e).format("YYYY-MM-DD HH:mm:ss")}},{title:"\u6240\u5c5e\u89d2\u8272",dataIndex:"role_id",render:function(t){return e.state.rolesList.find((function(e){return e._id===t})).name}},{title:"\u64cd\u4f5c",width:100,render:function(t){return r.a.createElement("span",null,r.a.createElement(s.a,{type:"link",onClick:function(){return e.showUpdate(t)}},"\u4fee\u6539"),r.a.createElement(s.a,{type:"link",onClick:function(){return e.handleDelete(t)}},"\u5220\u9664"))}}]},e.getUsersList=Object(N.a)(L.a.mark((function t(){var a;return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O("listUserApi");case 2:a=t.sent,e.setState({usersList:a.data.users,rolesList:a.data.roles});case 4:case"end":return t.stop()}}),t)}))),e.showAdd=function(){e.setState({isShowAdd:!0,user:{}}),e.addFormRef.current.resetFields()},e.showUpdate=function(t){e.setState({user:t,isShowAdd:!0}),e.addFormRef.current.setFieldsValue(t)},e.handleSubmit=function(){e.addFormRef.current.validateFields().then(function(){var t=Object(N.a)(L.a.mark((function t(a){var n;return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),n=e.state.user._id?"updateUserApi":"addUserApi",t.next=4,O(n,a);case 4:0===t.sent.status&&(e.setState({isShowAdd:!1,isShowSet:!1,loading:!1}),e.getUsersList());case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},e.handleDelete=function(t){_.a.confirm({title:"\u662f\u5426\u786e\u8ba4\u5220\u9664\u7528\u6237".concat(t.username),onOk:function(){var a=Object(N.a)(L.a.mark((function a(){return L.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,O("deleteUserApi",{userId:t._id});case 2:0===a.sent.status&&(v.b.success("\u5220\u9664\u7528\u6237\u6210\u529f"),e.getUsersList());case 4:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}()})},e}return Object(x.a)(a,[{key:"componentDidMount",value:function(){this.initColumns(),this.getUsersList()}},{key:"render",value:function(){var e=this,t=this.state,a=t.usersList,n=t.loading,o=t.isShowAdd,c=t.rolesList,i=t.user,l=r.a.createElement(s.a,{type:"primary",onClick:this.showAdd},r.a.createElement(he.a,null),"\u521b\u5efa\u7528\u6237");return r.a.createElement("div",null,r.a.createElement(de.a,{title:l},r.a.createElement(me.a,{bordered:!0,loading:n,rowKey:"_id",dataSource:a,columns:this.columns,pagination:{defaultPageSize:10,showQuickJumper:!0,showSizeChanger:!0}}),r.a.createElement(_.a,{title:i._id?"\u4fee\u6539\u7528\u6237":"\u521b\u5efa\u7528\u6237",forceRender:!0,visible:o,onOk:this.handleSubmit,onCancel:function(){return e.setState({isShowAdd:!1})}},r.a.createElement(d.a,Object.assign({},qe,{ref:this.addFormRef,initialValues:{}}),r.a.createElement(d.a.Item,{label:"\u7528\u6237\u540d",name:"username",hasFeedback:!0,rules:[{required:!0,whitespace:!0,message:"Please input your Username!"}]},r.a.createElement(u.a,{placeholder:"Username"})),i._id?null:r.a.createElement(d.a.Item,{label:"\u5bc6\u7801",name:"password",hasFeedback:!0,rules:[{required:!0,whitespace:!0,validator:Me}]},r.a.createElement(u.a.Password,{placeholder:"Password"})),r.a.createElement(d.a.Item,{label:"\u624b\u673a\u53f7",name:"phone",hasFeedback:!0,rules:[{required:!0,whitespace:!0,message:"Please input your Username!"}]},r.a.createElement(u.a,{placeholder:"Phone"})),r.a.createElement(d.a.Item,{label:"\u90ae\u7bb1",name:"email",hasFeedback:!0,rules:[{required:!0,whitespace:!0,message:"Please input your Username!"}]},r.a.createElement(u.a,{placeholder:"Email"})),r.a.createElement(d.a.Item,{label:"\u89d2\u8272",name:"role_id",hasFeedback:!0,rules:[{required:!0,whitespace:!0,message:"Please input your Username!"}]},r.a.createElement(pe.a,{placeholder:"\u8bf7\u9009\u62e9"},c.map((function(e){return r.a.createElement(He,{value:e._id,key:e._id},e.name)}))))))))}}]),a}(n.Component),Ve=(a(814),a(512)),Ke=d.a.Item,Ye=function(e){Object(R.a)(a,e);var t=Object(F.a)(a);function a(e){var n;Object(I.a)(this,a),(n=t.call(this,e)).onCheck=function(e){console.log(e),n.setState({checkedKeys:e})},n.getMenus=function(){return n.state.checkedKeys};var r=(n.props.role||{}).menus;return n.state={checkedKeys:r||[]},n}return Object(x.a)(a,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({checkedKeys:e.role.menus})}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props.role,t=this.state.checkedKeys;return r.a.createElement("div",null,r.a.createElement(Ke,{label:"\u89d2\u8272\u540d\u79f0"},r.a.createElement(u.a,{value:e.name,disabled:!0})),r.a.createElement(Ke,{label:"\u5e73\u53f0\u6743\u9650"},r.a.createElement(Ve.a,{checkable:!0,defaultExpandAll:!0,checkedKeys:t,treeData:Z,onCheck:this.onCheck})))}}]),a}(n.Component),Be=function(e){Object(R.a)(a,e);var t=Object(F.a)(a);function a(){var e;Object(I.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).addFormRef=r.a.createRef(),e.treeFormRef=r.a.createRef(),e.state={loading:!1,rolesList:[],role:{},isShowAdd:!1,isShowSet:!1},e.initCloums=function(){e.columns=[{title:"\u89d2\u8272\u540d\u79f0",dataIndex:"name"},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"create_time",render:function(e){return D()(e).format("YYYY-MM-DD HH:mm:ss")}},{title:"\u6388\u6743\u65f6\u95f4",dataIndex:"auth_time",render:function(e){return e?D()(e).format("YYYY-MM-DD HH:mm:ss"):""}},{title:"\u6388\u6743\u4eba",dataIndex:"auth_name"}]},e.getRolesList=Object(N.a)(L.a.mark((function t(){var a;return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O("listRoleApi");case 2:a=t.sent,e.setState({rolesList:a.data});case 4:case"end":return t.stop()}}),t)}))),e.handleDelete=function(t){_.a.confirm({title:"\u662f\u5426\u786e\u8ba4\u5220\u9664\u89d2\u8272".concat(t.name),onOk:function(){var a=Object(N.a)(L.a.mark((function a(){return L.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,O("deleteRoleApi",{_id:t._id});case 2:0===a.sent.status&&(v.b.success("\u5220\u9664\u7528\u6237\u6210\u529f"),e.getUsersList());case 4:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}()})},e.createRole=function(){e.addFormRef.current.validateFields().then(function(){var t=Object(N.a)(L.a.mark((function t(a){return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O("addRoleApi",a);case 2:0===t.sent.status&&(e.setState({isShowAdd:!1}),e.getRolesList());case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},e.setRole=Object(N.a)(L.a.mark((function t(){var a,n;return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state.role,n=e.treeFormRef.current.getMenus(),a.menus=n,a.auth_name=e.props.userInfo&&e.props.userInfo.username,t.next=6,O("updateRoleApi",a);case 6:0===t.sent.status&&(v.b.success("\u8bbe\u7f6e\u89d2\u8272\u6743\u9650\u6210\u529f"),e.setState((function(e){return{rolesList:Object(ne.a)(e.rolesList),isShowSet:!1}})));case 8:case"end":return t.stop()}}),t)}))),e.onRow=function(t){return{onClick:function(a){e.setState({role:t})}}},e}return Object(x.a)(a,[{key:"componentDidMount",value:function(){this.initCloums(),this.getRolesList()}},{key:"render",value:function(){var e=this,t=this.state,a=t.rolesList,n=t.role,o=t.loading,c=t.isShowAdd,i=t.isShowSet,l=r.a.createElement(r.a.Fragment,null,r.a.createElement(s.a,{type:"primary",onClick:function(){return e.setState({isShowAdd:!0})}},r.a.createElement(he.a,null),"\u521b\u5efa\u89d2\u8272"),"\xa0\xa0",r.a.createElement(s.a,{type:"primary",onClick:function(){return e.setState({isShowSet:!0})},disabled:!n._id},"\u8bbe\u7f6e\u89d2\u8272\u6743\u9650"));return r.a.createElement("div",null,r.a.createElement(de.a,{title:l},r.a.createElement(me.a,{bordered:!0,loading:o,rowKey:"_id",rowSelection:{type:"radio",selectedRowKeys:[n._id],onSelect:function(t){e.setState({role:t})}},dataSource:a,columns:this.columns,pagination:{defaultPageSize:10,showQuickJumper:!0,showSizeChanger:!0},onRow:this.onRow}),r.a.createElement(_.a,{title:"\u521b\u5efa\u89d2\u8272",visible:c,onOk:this.createRole,onCancel:function(){return e.setState({isShowAdd:!1})}},r.a.createElement(d.a,{ref:this.addFormRef,initialValues:{roleName:""}},r.a.createElement(d.a.Item,{name:"roleName",label:"\u89d2\u8272\u540d\u79f0",rules:[{required:!0,whitespace:!0,message:"\u89d2\u8272\u540d\u79f0\u5fc5\u987b\u586b\u5199"}]},r.a.createElement(u.a,{placeholder:"\u8bf7\u8f93\u5165\u89d2\u8272\u540d\u79f0"})))),r.a.createElement(_.a,{title:"\u8bbe\u7f6e\u89d2\u8272\u6743\u9650",visible:i,onOk:this.setRole,onCancel:function(){return e.setState({isShowSet:!1})}},r.a.createElement(Ye,{ref:this.treeFormRef,role:n}))))}}]),a}(n.Component),Je=Object(h.b)((function(e){return{userInfo:e.user}}),{})(Be),We=a(1144),Xe=a(177),Qe=a.n(Xe),$e=function(e){Object(R.a)(a,e);var t=Object(F.a)(a);function a(e){var n;return Object(I.a)(this,a),(n=t.call(this,e)).update=function(){n.setState((function(e){return{sales:e.sales.map((function(e){return e-1})),stores:e.stores.reduce((function(e,t){return e.push(t+1),e}),[])}}))},n.getOption=function(e,t){return{title:{text:"ECharts \u5165\u95e8\u793a\u4f8b"},tooltip:{},legend:{data:["\u9500\u91cf","\u5e93\u5b58"]},xAxis:{data:["\u886c\u886b","\u7f8a\u6bdb\u886b","\u96ea\u7eba\u886b","\u88e4\u5b50","\u9ad8\u8ddf\u978b","\u889c\u5b50"]},yAxis:{},series:[{name:"\u9500\u91cf",type:"bar",data:e},{name:"\u5e93\u5b58",type:"bar",data:t}]}},n.state={sales:[12,23,14,23,36,18],stores:[15,33,18,23,26,12]},n}return Object(x.a)(a,[{key:"render",value:function(){var e=this.state,t=e.sales,a=e.stores,n=r.a.createElement(s.a,{type:"primary",icon:r.a.createElement(We.a,null),onClick:this.update},"\u66f4\u65b0");return r.a.createElement("div",null,r.a.createElement(de.a,{title:"\u67f1\u72b6\u56fe",extra:n},r.a.createElement(Qe.a,{option:this.getOption(t,a)})))}}]),a}(n.Component),Ze=function(e){Object(R.a)(a,e);var t=Object(F.a)(a);function a(e){var n;return Object(I.a)(this,a),(n=t.call(this,e)).update=function(){n.setState((function(e){return{sales:e.sales.map((function(e){return e-1})),stores:e.stores.reduce((function(e,t){return e.push(t+1),e}),[])}}))},n.getOption=function(e,t){return{title:{text:"ECharts \u5165\u95e8\u793a\u4f8b"},tooltip:{},legend:{data:["\u9500\u91cf","\u5e93\u5b58"]},xAxis:{data:["\u886c\u886b","\u7f8a\u6bdb\u886b","\u96ea\u7eba\u886b","\u88e4\u5b50","\u9ad8\u8ddf\u978b","\u889c\u5b50"]},yAxis:{},series:[{name:"\u9500\u91cf",type:"line",data:e},{name:"\u5e93\u5b58",type:"line",data:t}]}},n.state={sales:[12,23,14,23,36,18],stores:[15,33,18,23,26,12]},n}return Object(x.a)(a,[{key:"render",value:function(){var e=this.state,t=e.sales,a=e.stores,n=r.a.createElement(s.a,{type:"primary",icon:r.a.createElement(We.a,null),onClick:this.update},"\u66f4\u65b0");return r.a.createElement("div",null,r.a.createElement(de.a,{title:"\u6298\u7ebf\u56fe",extra:n},r.a.createElement(Qe.a,{option:this.getOption(t,a)})))}}]),a}(n.Component),Ge=function(e){Object(R.a)(a,e);var t=Object(F.a)(a);function a(e){var n;return Object(I.a)(this,a),(n=t.call(this,e)).update=function(){n.setState({sales:[22,13,24,33,16,28],stores:[25,23,38,13,36,22]})},n.getOption=function(e,t){return{title:{text:"\u67d0\u7ad9\u70b9\u7528\u6237\u8bbf\u95ee\u6765\u6e90",subtext:"\u7eaf\u5c5e\u865a\u6784",left:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:["\u76f4\u63a5\u8bbf\u95ee","\u90ae\u4ef6\u8425\u9500","\u8054\u76df\u5e7f\u544a","\u89c6\u9891\u5e7f\u544a","\u641c\u7d22\u5f15\u64ce"]},series:[{name:"\u8bbf\u95ee\u6765\u6e90",type:"pie",radius:"55%",center:["50%","60%"],data:[{value:335,name:"\u76f4\u63a5\u8bbf\u95ee"},{value:310,name:"\u90ae\u4ef6\u8425\u9500"},{value:234,name:"\u8054\u76df\u5e7f\u544a"},{value:135,name:"\u89c6\u9891\u5e7f\u544a"},{value:1548,name:"\u641c\u7d22\u5f15\u64ce"}],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}},n.state={sales:[12,23,14,23,36,18],stores:[15,33,18,23,26,12]},n}return Object(x.a)(a,[{key:"render",value:function(){var e=r.a.createElement(s.a,{type:"primary",icon:r.a.createElement(We.a,null),onClick:this.update},"\u66f4\u65b0");return r.a.createElement("div",null,r.a.createElement(de.a,{title:"\u997c\u72b6\u56fe",extra:e},r.a.createElement(Qe.a,{option:this.getOption()})))}}]),a}(n.Component),et=A.a.Content,tt=A.a.Footer,at=A.a.Sider,nt=function(e){Object(R.a)(a,e);var t=Object(F.a)(a);function a(e){var n;return Object(I.a)(this,a),(n=t.call(this,e)).currentOpen="",n.onCollapse=function(e){console.log(e),n.setState({collapsed:e})},n.state={collapsed:!1},n}return Object(x.a)(a,[{key:"render",value:function(){var e=this.props.userInfo||{};return e&&e._id?r.a.createElement("div",{className:"admin-box"},r.a.createElement(A.a,{style:{minHeight:"100%"}},r.a.createElement(at,{collapsible:!0,collapsed:this.state.collapsed,onCollapse:this.onCollapse,style:{overflow:"auto",height:"100vh",position:"fixed",left:0}},r.a.createElement(i.b,{to:"/",className:"login-header"},r.a.createElement("img",{src:b.a,alt:"logo"}),r.a.createElement("h1",null,"\u7ba1\u7406\u7cfb\u7edf")),r.a.createElement(te,this.props)),r.a.createElement(A.a,{className:this.state.collapsed?"side-fold":"side-nofold"},r.a.createElement(M,this.props),r.a.createElement(et,{style:{margin:"0 16px 0",overflow:"initial"}},r.a.createElement(ie,{currentPath:this.props.location.pathname}),r.a.createElement("div",{className:"site-layout-background",style:{background:"#fff"}},r.a.createElement(l.d,null,r.a.createElement(l.b,{path:"/",exact:!0,component:ue}),r.a.createElement(l.b,{path:"/category",component:be}),r.a.createElement(l.b,{path:"/product",component:Te}),r.a.createElement(l.b,{path:"/user",component:ze}),r.a.createElement(l.b,{path:"/role",component:Je}),r.a.createElement(l.b,{path:"/bar",component:$e}),r.a.createElement(l.b,{path:"/line",component:Ze}),r.a.createElement(l.b,{path:"/pie",component:Ge}),r.a.createElement(l.a,{to:"/"})))),r.a.createElement(tt,{style:{textAlign:"center"}},"Ant Design \xa92018 Created by Ant UED")))):r.a.createElement(l.a,{to:"/login"})}}]),a}(n.Component),rt=Object(h.b)((function(e){return{userInfo:e.user}}),{})(nt),ot=function(e){var t=e.options,a=e.onChange,o=Object(n.useState)([]),c=Object(m.a)(o,2),i=c[0],l=c[1];return Object(n.useEffect)((function(){l(Object(ne.a)(t))}),[t]),r.a.createElement(we.a,{options:i,loadData:function(e){var n=e[e.length-1];n.loading=!0,setTimeout((function(){n.loading=!1,n.children=[{label:"".concat(n.label," Dynamic 1"),value:"dynamic1"},{label:"".concat(n.label," Dynamic 2"),value:"dynamic2"}],l(Object(ne.a)(t)),a&&a()}),1e3)},changeOnSelect:!0})},ct=function(){var e=Object(n.useState)(0),t=Object(m.a)(e,2),a=t[0],o=t[1];return Object(n.useEffect)((function(){return 36e5===a?clearTimeout(Se):Se=setTimeout((function(){return o((function(e){return e+1e3}))}),1e3),function(){clearTimeout(Se)}}),[a]),r.a.createElement("div",{style:{color:a>=6e4?"red":"green"}},r.a.createElement("span",null,D()(a).format("mm:ss")))},it=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(ct,null),r.a.createElement(ot,{options:[{value:"he_cheng",label:"\u5408\u6210\u57df",isLeaf:!1},{value:"\u82b1\u5457\u57df",label:"hua_bei",isLeaf:!1}]}))};var lt=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(l.d,null,r.a.createElement(l.b,{path:"/login",component:j}),r.a.createElement(l.b,{path:"/timer",component:it}),r.a.createElement(l.b,{path:"/",component:rt})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var st=a(133),ut=a(509);var dt=JSON.parse(localStorage.userInfo||"{}");var mt=Object(st.combineReducers)({count:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"increase":return e+t.data;case"decrease":return e-t.data;default:return e}},headTitle:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"\u9996\u9875",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"set_head_title":return t.data;default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"set_user":return t.data;case"clear_user":return{};default:return e}}}),pt=a(510),ft=Object(st.createStore)(mt,Object(ut.composeWithDevTools)(Object(st.applyMiddleware)(pt.a)));c.a.render(r.a.createElement(i.a,null,r.a.createElement(h.a,{store:ft},r.a.createElement(lt,null)),","),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},245:function(e,t,a){e.exports=a.p+"static/media/logo.ba1f87ec.png"},515:function(e,t,a){e.exports=a(1132)},520:function(e,t,a){},521:function(e,t,a){},530:function(e,t,a){},648:function(e,t,a){}},[[515,1,2]]]);
//# sourceMappingURL=main.696bf404.chunk.js.map