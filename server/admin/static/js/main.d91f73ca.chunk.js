(this["webpackJsonpmy-react-demo"]=this["webpackJsonpmy-react-demo"]||[]).push([[0],{1142:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(33),c=a.n(o),l=a(97),i=(a(525),a(526),a(62)),s=(a(73),a(21)),u=(a(125),a(57)),d=(a(212),a(138)),m=(a(164),a(43)),p=a(6),f=(a(213),a(56)),h=a(1144),g=a(1148),b=a(1145),E=a(92),v=(a(538),a(251)),y=a.n(v),w=(a(126),a(58)),k=a(325),O=a.n(k),S={promiseArr:{method:"get",url:"/manage/promiseArr"},loginApi:{method:"post",url:"/manage/login"},listCategoryApi:{method:"get",url:"/manage/category/list"},addCategoryApi:{method:"post",url:"/manage/category/add"},updateCategoryApi:{method:"post",url:"/manage/category/update"},searchListProductApi:{method:"get",url:"/manage/product/search"},listProductApi:{method:"get",url:"/manage/product/list"},addProductApi:{method:"post",url:"/manage/product/add"},updateProductApi:{method:"post",url:"/manage/product/update"},productStatusApi:{method:"post",url:"/manage/product/updateStatus"},listUserApi:{method:"get",url:"/manage/user/list"},addUserApi:{method:"post",url:"/manage/user/add"},updateUserApi:{method:"post",url:"/manage/user/update"},deleteUserApi:{method:"post",url:"/manage/user/delete"},listRoleApi:{method:"get",url:"/manage/role/list"},addRoleApi:{method:"post",url:"/manage/role/add"},updateRoleApi:{method:"post",url:"/manage/role/update"},deleteRoleApi:{method:"post",url:"/manage/role/delete"},deleteImgApi:{method:"post",url:"/manage/img/delete"}};console.log(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}));var C=O.a.create({baseURL:"",timeout:1e4,withCredentials:!1});C.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),C.interceptors.response.use((function(e){return e.data}),(function(e){return e.response.data.message&&w.b.error(e.response.data.message),e.response.status,Promise.reject(e)}));var j=function(e,t){var a=S[e].method,n=S[e].url,r={};return"get"===a||"delete"===a?r={params:t}:"post"!==a&&"put"!==a&&"patch"!==a||(r=t),new Promise((function(e,t){C[a](n,r).then((function(t){e(t)})).catch((function(e){t(e)}))}))},I=function(e,t,a){return t?t.length<4?Promise.reject("\u5bc6\u7801\u957f\u5ea6\u4e0d\u80fd\u5c0f\u4e8e4\u4f4d"):t.length>12?Promise.reject("\u5bc6\u7801\u957f\u5ea6\u4e0d\u80fd\u5927\u4e8e12\u4f4d"):/^[a-zA-Z0-9_]+$/.test(t)?Promise.resolve():Promise.reject("\u5bc6\u7801\u5fc5\u987b\u662f\u82f1\u6587\u3001\u6570\u5b57\u6216\u4e0b\u5212\u7ebf\u7ec4\u6210"):Promise.reject("\u5bc6\u7801\u5fc5\u987b\u8f93\u5165")},x="react",R=r.a.createElement(f.a,{onClick:function(e){console.log("click ",e),x=e.key,document.cookie="version=".concat(x,";path=/;"),window.location="https://www.coco727.com"}},r.a.createElement(f.a.Item,{key:"nuxt"},"nuxt.js"),r.a.createElement(f.a.Item,{key:"vue"},"vue.js"),r.a.createElement(f.a.Item,{key:"react",disabled:!0},"react.js")),A=Object(E.b)((function(e){return{userInfos:e.user}}),{asyncSetUser:function(e){return function(t){j("loginApi",e).then((function(e){0===e.status?(w.b.success("\u767b\u9646\u6210\u529f"),localStorage.userInfos=JSON.stringify(e.data),t(function(e){return{type:"set_user",data:e}}(e.data))):1===e.status&&w.b.error(e.msg)}))}}})((function(e){var t=e.userInfos||{};if(t&&t._id)return r.a.createElement(i.a,{to:"/"});var a=m.a.useForm(),n=Object(p.a)(a,1)[0];return r.a.createElement("div",{className:"login-box"},r.a.createElement("header",{className:"login-header"},r.a.createElement("div",{className:"header-left"},r.a.createElement("img",{src:y.a,alt:"logo"}),r.a.createElement("h1",null,"React\u9879\u76ee\uff1a\u540e\u53f0\u7ba1\u7406\u7cfb\u7edf")),r.a.createElement("div",{className:"dropdown-box"},r.a.createElement(d.a,{overlay:R,className:"dropdown"},r.a.createElement("a",{href:"#!",className:"ant-dropdown-link",onClick:function(e){return e.preventDefault()}},"\u7248\u672c: ",x,".js ",r.a.createElement(h.a,null))))),r.a.createElement("section",{className:"login-content"},r.a.createElement("h2",null,"\u7528\u6237\u767b\u9646"),r.a.createElement(m.a,{className:"login-form",form:n,onFinish:function(t){console.log(n),console.log(t),n.validateFields().then((function(t){console.log(t),e.asyncSetUser(t)})).catch((function(e){console.log(e)}))}},r.a.createElement(m.a.Item,{name:"username",hasFeedback:!0,rules:[{required:!0,whitespace:!0,message:"\u7528\u6237\u540d\u5fc5\u987b\u8f93\u5165"}]},r.a.createElement(u.a,{prefix:r.a.createElement(g.a,null),placeholder:"Username"})),r.a.createElement(m.a.Item,{name:"password",hasFeedback:!0,rules:[{required:!0,whitespace:!0,validator:I}]},r.a.createElement(u.a.Password,{prefix:r.a.createElement(b.a,null),placeholder:"Password"})),r.a.createElement(m.a.Item,null,r.a.createElement(s.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"\u767b\u9646")))))})),N=a(11),F=a(12),L=a(14),_=a(51),P=(a(662),a(184)),U=(a(664),a(22)),D=a.n(U),T=a(52),M=(a(188),a(77)),H=a(120),q=a.n(H),z=a(488),V=a.n(z),K=function(e){return new Promise((function(t,a){var n="http://api.map.baidu.com/telematics/v3/weather?location=".concat(e,"&output=json&ak=3p49MVra6urFRGOT9s8UBWr2");V()(n,{},(function(e,n){if(e||"success"!==n.status)a(n);else{var r=n.results[0].weather_data[0],o=r.dayPictureUrl,c=r.weather,l=r.temperature;t({dayPictureUrl:o,weather:c,temperature:l})}}))}))},Y="react",B=r.a.createElement(f.a,{onClick:function(e){console.log("click ",e),Y=e.key,document.cookie="version=".concat(Y,";path=/;"),window.location="https://www.coco727.com"}},r.a.createElement(f.a.Item,{key:"nuxt"},"nuxt.js"),r.a.createElement(f.a.Item,{key:"vue"},"vue.js"),r.a.createElement(f.a.Item,{key:"react",disabled:!0},"react.js")),J=Object(E.b)((function(e){return{currentTitle:e.headTitle,userInfos:e.user}}),{clearUser:function(e){return localStorage.removeItem("userInfos"),{type:"clear_user",data:e}}})((function(e){var t=Object(n.useState)(""),a=Object(p.a)(t,2),o=a[0],c=a[1],l=Object(n.useState)({}),i=Object(p.a)(l,2),s=i[0],u=i[1],m=e.currentTitle,f=(e.userInfos||{}).username;return Object(n.useEffect)((function(){var e=setTimeout((function(){c((function(){return q()(new Date).format("YYYY-MM-DD HH:mm:ss")}))}),1e3);return function(){clearTimeout(e)}}),[o]),Object(n.useEffect)((function(){function e(){return(e=Object(T.a)(D.a.mark((function e(){var t,a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.cookie.cname,e.next=3,K(t);case 3:a=e.sent,u(a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),r.a.createElement("div",{className:"header-box"},r.a.createElement("div",{className:"header-top"},r.a.createElement("div",{className:"dropdown-box"},r.a.createElement(d.a,{overlay:B,className:"dropdown"},r.a.createElement("a",{href:"#!",className:"ant-dropdown-link",onClick:function(e){return e.preventDefault()}},"\u7248\u672c: ",Y,".js ",r.a.createElement(h.a,null)))),r.a.createElement("div",{className:"top-right"},r.a.createElement("span",null,"Hello! ",f),r.a.createElement("a",{href:"#!",rel:"noopener noreferrer",onClick:function(){return function(e){M.a.confirm({title:"\u786e\u8ba4\u9000\u51fa?",onOk:function(){e.clearUser()},onCancel:function(){console.log("Cancel")}})}(e)}},"\u9000\u51fa"))),r.a.createElement("div",{className:"header-bottom"},r.a.createElement("div",{className:"bottom-left"},m),r.a.createElement("div",{className:"bottom-right"},r.a.createElement("span",null,o," "),r.a.createElement("span",null,window.cookie.cname),r.a.createElement("img",{src:s.dayPictureUrl,alt:"weather"}),r.a.createElement("span",null,s.weather),"/",r.a.createElement("span",null,s.temperature))))})),W=a(1147),X=a(1160),Q=a(1149),$=a(1150),Z=a(1151),G=a(1152),ee=a(1153),te=a(1154),ae=a(1155),ne=[{title:"\u9996\u9875",key:"/",icon:r.a.createElement(W.a,null),isPublic:!0},{title:"\u5546\u54c1",key:"/products",icon:r.a.createElement(X.a,null),children:[{title:"\u54c1\u7c7b\u7ba1\u7406",key:"/category",icon:r.a.createElement(Q.a,null)},{title:"\u5546\u54c1\u7ba1\u7406",key:"/product",icon:r.a.createElement($.a,null)}]},{title:"\u7528\u6237\u7ba1\u7406",key:"/user",icon:r.a.createElement(g.a,null)},{title:"\u89d2\u8272\u7ba1\u7406",key:"/role",icon:r.a.createElement(Z.a,null)},{title:"\u56fe\u5f62\u56fe\u8868",key:"/charts",icon:r.a.createElement(G.a,null),children:[{title:"\u67f1\u5f62\u56fe",key:"/bar",icon:r.a.createElement(ee.a,null)},{title:"\u6298\u7ebf\u56fe",key:"/line",icon:r.a.createElement(te.a,null)},{title:"\u997c\u56fe",key:"/pie",icon:r.a.createElement(ae.a,null)}]}],re=f.a.SubMenu,oe=function(e){var t="";return ne.forEach((function(a){a.children&&(a.children.find((function(t){return t.key===e}))&&(t=a.key))})),t},ce=Object(E.b)((function(e){return{}}),{setHeadTitle:function(e){return{type:"set_head_title",data:e}}})((function(e){var t=e.location.pathname;return 0===t.indexOf("/product")&&(t="/product"),r.a.createElement(f.a,{theme:"dark",mode:"inline",selectedKeys:[t],defaultOpenKeys:[oe(t)]},function e(t,a){var n=a.location.pathname;return t.map((function(t){if(!function(e,t){var a=e.key,n=e.isPublic,r=t.userInfos||{},o=r.username,c=r.role_id?r.role_id.menus:[];return!("admin"!==o&&!n&&-1===c.indexOf(a))||!!e.children&&!!e.children.find((function(e){return-1!==c.indexOf(e.key)}))}(t,a))return!1;if(t.children){var o=t.children.find((function(e){return 0===n.indexOf(e.key)}));return o&&a.setHeadTitle(o.title),r.a.createElement(re,{key:t.key,icon:t.icon,title:t.title},e(t.children,a))}return t.key===n&&a.setHeadTitle(t.title),r.a.createElement(f.a.Item,{key:t.key,icon:t.icon,onClick:function(){return a.setHeadTitle(t.title)}},r.a.createElement(l.b,{to:t.key},t.title))}))}(ne,e))})),le=(a(679),a(518)),ie=a(8),se=[{path:"",breadcrumbName:"Home"},{path:"category",breadcrumbName:"Category"},{path:"product",breadcrumbName:"Product"},{path:"addUpdate",breadcrumbName:"AddUpdate"},{path:"user",breadcrumbName:"User"},{path:"role",breadcrumbName:"Role"},{path:"bar",breadcrumbName:"Bar"},{path:"line",breadcrumbName:"Line"},{path:"pie",breadcrumbName:"Pie"}];function ue(e){var t=e.currentPath.split("/").filter((function(e){return e}));t.unshift("");var a=[];return t.forEach((function(e){var t=se.filter((function(t){return t.path===e}));a=[].concat(Object(ie.a)(a),Object(ie.a)(t))})),a}function de(e,t,a,n){return a.indexOf(e)===a.length-1?r.a.createElement("span",null,e.breadcrumbName):r.a.createElement(l.b,{to:n.join("/")},e.breadcrumbName)}var me=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(le.a,{style:{margin:"16px 0"},itemRender:de,routes:ue(e)}))},pe=(a(683),a(83)),fe=(a(685),a(124)),he=a(1156),ge=(a(687),function(e){Object(L.a)(a,e);var t=Object(_.a)(a);function a(){return Object(N.a)(this,a),t.apply(this,arguments)}return Object(F.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"home-box"},r.a.createElement("h2",null,"\u60a8\u597d\uff0c\u6b22\u8fce\u8bbf\u95ee\uff01"),r.a.createElement("div",null,r.a.createElement("h3",null,"Mamba\u7ba1\u7406\u7cfb\u7edf\u662f\u4e2a\u4eba\u5b66\u4e60\u4ee5\u4e0b\u6280\u672f\u7684\u7b2c\u4e00\u6b21\u5b9e\u8df5\uff1a"),r.a.createElement("ul",{className:"ul-li"},r.a.createElement("li",null,"1\u3001",r.a.createElement(fe.a,{color:"#61dafb"},r.a.createElement("a",{href:"https://reactjs.org",target:"_blank",rel:"noopener noreferrer"},"react.js")),"\u6846\u67b6"),r.a.createElement("li",null,"2\u3001",r.a.createElement(fe.a,{color:"#61dafb"},r.a.createElement("a",{href:"https://reactjs.org",target:"_blank",rel:"noopener noreferrer"},"react.js")),"\u76f8\u5173\u751f\u6001\uff1a",r.a.createElement(fe.a,{color:"#4183c4"},r.a.createElement("a",{href:"https://reactrouter.com",target:"_blank",rel:"noopener noreferrer"},"react-router-dom")),"\u3001",r.a.createElement(fe.a,{color:"#764abc"},r.a.createElement("a",{href:"https://redux.js.org/redux",target:"_blank",rel:"noopener noreferrer"},"redux")),"( ",r.a.createElement(fe.a,{color:"purple"},r.a.createElement("a",{href:"https://redux.js.org/basics/usage-with-react",target:"_blank",rel:"noopener noreferrer"},"react-redux")),r.a.createElement(fe.a,{color:"purple"},r.a.createElement("a",{href:"https://github.com/reduxjs/redux-thunk",target:"_blank",rel:"noopener noreferrer"},"redux-thunk")),r.a.createElement(fe.a,{color:"purple"},r.a.createElement("a",{href:"https://redux-saga-in-chinese.js.org",target:"_blank",rel:"noopener noreferrer"},"redux-saga")),")\u7b49"),r.a.createElement("li",null,"3\u3001",r.a.createElement(fe.a,{color:"#f50"},r.a.createElement("a",{href:"https://ant.design",target:"_blank",rel:"noopener noreferrer"},"Ant Design")),": \u8682\u8681\u91d1\u670d\u57fa\u4e8ereact\u7684UI\u7ec4\u4ef6\u5e93"))),r.a.createElement("h3",{style:{textAlign:"center",marginBottom:30}},"\u65f6\u95f4\u8f74"),r.a.createElement(pe.a,{mode:"alternate",pending:"\u671f\u5f85\u4e0b\u6b65\u66f4\u65b0..."},r.a.createElement(pe.a.Item,{label:"2015-07-15",color:"green"},"create-react-app \u642d\u5efa\u9879\u76ee"),r.a.createElement(pe.a.Item,{label:"2015-07-16",color:"green"},"\u5b89\u88c5react-router-dom,\u5b8c\u6210\u9875\u9762\u8def\u7531\u57fa\u672c\u529f\u80fd"),r.a.createElement(pe.a.Item,{label:"2015-07-17",color:"green"},"\u5b89\u88c5antd,\u5b9e\u73b0\u6309\u9700\u52a0\u8f7d\u7ec4\u4ef6\u4ee5\u53ca\u81ea\u5b9a\u4e49\u4e3b\u9898"),r.a.createElement(pe.a.Item,{label:"2015-07-18",color:"green"},"\u5229\u7528antd\u7ec4\u4ef6Layout\u5e03\u5c40,\u8fdb\u884c\u9875\u9762\u6574\u4f53\u5e03\u5c40"),r.a.createElement(pe.a.Item,{label:"2015-07-20",color:"green"},"\u5b8c\u6210\u4fa7\u8fb9\u680fsideBar, \u5934\u90e8header\u4ee5\u53ca\u9762\u5305\u5c51\u5bfc\u822abreadcrumb"),r.a.createElement(pe.a.Item,{label:"2015-07-21",color:"green"},"Node.js+mongoose.js+MongoDB\u642d\u5efa\u540e\u53f0\u670d\u52a1\uff0c\u5efa\u7acbSchema\u6570\u636e\u6a21\u578b: user\u3001role\u3001category\u3001product"),r.a.createElement(pe.a.Item,{label:"2015-07-23",color:"green"},"\u5b8c\u6210\u670d\u52a1\u7aefuser\u3001login\u6a21\u5757\u63a5\u53e3\uff0c\u4ee5\u53ca\u524d\u7aefuser\u3001login\u9875\u9762"),r.a.createElement(pe.a.Item,{label:"2015-07-28",color:"green"},"\u5b8c\u6210\u670d\u52a1\u7aefrole\u3001category\u3001product\u6a21\u5757\u63a5\u53e3\uff0c\u4ee5\u53ca\u524d\u7aefrole\u3001category\u3001product\u9875\u9762\u7b49"),r.a.createElement(pe.a.Item,{label:"2015-07-31",color:"green"},"\u5b89\u88c5redux\u3001react-redux\u3001redux-thunk\u3001redux-devtools-extension\uff0c\u5b66\u4e60redux,\u5b9e\u73b0\u7ec4\u4ef6\u5171\u4eab\u6570\u636e\uff0c\u5982\u767b\u9646\u7528\u6237\u4fe1\u606fuserInfos"),r.a.createElement(pe.a.Item,{label:"2015-08-01",color:"green"},"\u4ee3\u7801\u4e0a\u4f20gitHub\uff0cNginx\u62c9\u53d6\u4ee3\u7801\uff0c\u6253\u5305\uff0c\u542f\u52a8node\u670d\u52a1\uff0c\u57df\u540d\u89e3\u6790\u3001nginx\u8f6c\u53d1, \u7ebf\u4e0a\u8bbf\u95ee"),r.a.createElement(pe.a.Item,{dot:r.a.createElement(he.a,{className:"timeline-clock-icon"}),color:"red"},"\u4f18\u5316\u9879\u76ee...")))}}]),a}(n.Component)),be=(a(134),a(70)),Ee=(a(248),a(140)),ve=(a(219),a(76)),ye=a(1157),we=a(1146),ke=ve.a.Option,Oe=function(e){Object(L.a)(a,e);var t=Object(_.a)(a);function a(){var e;Object(N.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).addFormRef=r.a.createRef(),e.updateFormRef=r.a.createRef(),e.state={loading:!1,visibleStatus:0,parentId:"0",parentName:"",categoryList:[],subCategoryList:[],categoryId:"",isLeaf:!1},e.initColumns=function(){e.columns=[{title:"\u5206\u7c7b\u7684\u540d\u79f0",dataIndex:"name",key:"name"},{title:"\u64cd\u4f5c",width:300,key:"action",render:function(t){return r.a.createElement("span",null,r.a.createElement(s.a,{type:"link",onClick:function(){return e.showUpdate(t)}},"\u4fee\u6539\u5206\u7c7b"),"0"===e.state.parentId?r.a.createElement(s.a,{type:"link",onClick:function(){return e.handleSubCategory(t)}},"\u67e5\u770b\u5b50\u5206\u7c7b"):null)}}]},e.handleCategory=function(){e.setState({parentId:"0",parentName:""})},e.handleSubCategory=function(t){e.setState({parentId:t._id,parentName:t.name},(function(){e.getCategoryList()}))},e.getCategoryList=Object(T.a)(D.a.mark((function t(){var a;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),t.next=3,j("listCategoryApi",{parentId:e.state.parentId});case 3:a=t.sent,"0"===e.state.parentId?e.setState({categoryList:a.data,loading:!1}):e.setState({subCategoryList:a.data,loading:!1});case 5:case"end":return t.stop()}}),t)}))),e.showAdd=function(){e.setState({visibleStatus:1}),e.addFormRef.current.setFieldsValue({parentId:e.state.parentId})},e.showUpdate=function(t){e.setState({visibleStatus:2,categoryId:t._id,isLeaf:t.isLeaf}),e.updateFormRef.current.setFieldsValue({categoryName:t.name,categoryId:t._id})},e.handleCancel=function(){e.setState({visibleStatus:0})},e.addCategory=function(t){console.log(t,e.addFormRef),e.addFormRef.current.validateFields().then((function(t){console.log(t),t.isLeaf="0"!==t.parentId,j("addCategoryApi",t).then((function(t){0===t.status?(w.b.success("\u64cd\u4f5c\u6210\u529f"),e.getCategoryList(),e.handleCancel(),e.addFormRef.current.resetFields()):1===t.status&&w.b.error(t.msg)}))})).catch((function(e){console.log(e)}))},e.updateCategory=function(){e.updateFormRef.current.validateFields().then((function(t){console.log(t),console.log(e.updateFormRef.current.getFieldsValue()),j("updateCategoryApi",{categoryId:e.state.categoryId,categoryName:t.categoryName,isLeaf:e.state.isLeaf}).then((function(t){0===t.status?(w.b.success("\u64cd\u4f5c\u6210\u529f"),e.getCategoryList(),e.handleCancel(),e.updateFormRef.current.resetFields()):1===t.status&&w.b.error(t.msg)}))})).catch((function(e){console.log(e)}))},e}return Object(F.a)(a,[{key:"componentDidMount",value:function(){this.initColumns(),this.getCategoryList()}},{key:"render",value:function(){var e=this.state,t=e.parentId,a=e.parentName,n=e.categoryList,o=e.subCategoryList,c=e.visibleStatus,l=e.loading,i="0"===t?"\u4e00\u7ea7\u5206\u7c7b\u5217\u8868":r.a.createElement(r.a.Fragment,null,r.a.createElement(s.a,{type:"link",onClick:this.handleCategory},"\u4e00\u7ea7\u5206\u7c7b\u5217\u8868"),r.a.createElement(ye.a,null),r.a.createElement("span",null,"  ",a,"\u5206\u7c7b\u5217\u8868")),d=r.a.createElement(s.a,{type:"primary",icon:r.a.createElement(we.a,null),onClick:this.showAdd},"\u6dfb\u52a0");return r.a.createElement("div",null,r.a.createElement(be.a,{title:i,extra:d},r.a.createElement(Ee.a,{bordered:!0,loading:l,rowKey:"_id",dataSource:"0"===t?n:o,columns:this.columns,pagination:{defaultPageSize:10,showQuickJumper:!0,showSizeChanger:!0}})),r.a.createElement(M.a,{title:"\u6dfb\u52a0\u5206\u7c7b",forceRender:!0,visible:1===c,onOk:this.addCategory,onCancel:this.handleCancel},r.a.createElement(m.a,{ref:this.addFormRef,initialValues:{parentId:t}},r.a.createElement(m.a.Item,{name:"parentId",label:"\u6240\u5c5e\u5206\u7c7b",rules:[{required:!0,message:"\u5fc5\u9009"}]},r.a.createElement(ve.a,null,r.a.createElement(ke,{value:"0"},"\u4e00\u7ea7\u5206\u7c7b"),n.map((function(e){return r.a.createElement(ke,{value:e._id,key:e._id},e.name)})))),r.a.createElement(m.a.Item,{name:"categoryName",label:"\u5206\u7c7b\u540d\u79f0",rules:[{required:!0,whitespace:!0,message:"\u5206\u7c7b\u540d\u79f0\u5fc5\u987b\u586b\u5199"}]},r.a.createElement(u.a,{placeholder:"\u8bf7\u8f93\u5165\u5206\u7c7b\u540d\u79f0"})))),r.a.createElement(M.a,{title:"\u4fee\u6539\u5206\u7c7b",forceRender:!0,visible:2===c,onOk:this.updateCategory,onCancel:this.handleCancel},r.a.createElement(m.a,{ref:this.updateFormRef,initialValues:{categoryName:"",categoryId:""}},r.a.createElement(m.a.Item,{name:"categoryName",label:"\u5206\u7c7b\u540d\u79f0",rules:[{required:!0,whitespace:!0,message:"\u5206\u7c7b\u540d\u79f0\u5fc5\u987b\u586b\u5199"}]},r.a.createElement(u.a,{placeholder:"\u8bf7\u8f93\u5165\u5206\u7c7b\u540d\u79f0"})))))}}]),a}(n.Component),Se=a(5),Ce=ve.a.Option,je=function(e){Object(L.a)(a,e);var t=Object(_.a)(a);function a(e){var n;return Object(N.a)(this,a),(n=t.call(this,e)).initColunms=function(){n.columns=[{title:"\u5546\u54c1\u540d\u79f0",dataIndex:"name"},{title:"\u5546\u54c1\u63cf\u8ff0",dataIndex:"desc"},{title:"\u4ef7\u683c",dataIndex:"price",render:function(e){return"\xa5"+e}},{title:"\u72b6\u6001",width:100,render:function(e){var t=e._id,a=e.status;return r.a.createElement("span",null,r.a.createElement(s.a,{type:"primary",onClick:function(){return n.handleSaleStatus(t,1===a?2:1)}},1===a?"\u4e0b\u67b6":"\u4e0a\u67b6"),r.a.createElement("span",null,1===a?"\u5728\u552e":"\u5df2\u4e0b\u67b6"))}},{title:"\u64cd\u4f5c",width:100,render:function(e){return r.a.createElement("span",null,r.a.createElement(s.a,{type:"link",onClick:function(){return n.props.history.push("/product/addUpdate",e)}},"\u4fee\u6539"),r.a.createElement(s.a,{type:"link",onClick:function(){return n.props.history.push("/product/addUpdate",e)}},"\u8be6\u60c5"))}}]},n.getProductList=Object(T.a)(D.a.mark((function e(){var t,a,r,o,c,l,i,s=arguments;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:1,a=s.length>1&&void 0!==s[1]?s[1]:1,n.setState({loading:!0}),r=n.state,o=r.searchType,c=r.searchName,l=Object(Se.a)({pageNum:t,pageSize:a},o,c),e.next=7,j("searchListProductApi",l);case 7:0===(i=e.sent).status?n.setState({productList:i.data.list,pageNum:t,pageSize:a,total:i.data.total,loading:!1}):w.b.error(i.msg);case 9:case"end":return e.stop()}}),e)}))),n.handleSaleStatus=function(){var e=Object(T.a)(D.a.mark((function e(t,a){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j("productStatusApi",{productId:t,status:a});case 2:0===e.sent.status&&n.getProductList();case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),n.state={total:0,pageNum:e.pageNum||1,pageSize:e.pageSize||1,loading:!1,productList:[],searchType:"productName",searchName:""},n}return Object(F.a)(a,[{key:"componentDidMount",value:function(){this.initColunms(),this.getProductList()}},{key:"render",value:function(){var e=this,t=this.state,a=t.productList,n=t.loading,o=t.pageNum,c=t.pageSize,l=t.total,i=t.searchType,d=t.searchName,m=r.a.createElement("span",null,r.a.createElement(ve.a,{value:i,style:{width:130},onChange:function(t){return e.setState({searchType:t})}},r.a.createElement(Ce,{value:"productName"},"\u6309\u540d\u79f0\u6765\u641c\u7d22"),r.a.createElement(Ce,{value:"productDesc"},"\u6309\u63cf\u8ff0\u6765\u641c\u7d22")),r.a.createElement(u.a,{value:d,placeholder:"\u5173\u952e\u5b57",onChange:function(t){return e.setState({searchName:t.target.value})},style:{width:200,margin:"0 15px"}}),r.a.createElement(s.a,{type:"primary",onClick:function(){return e.getProductList()}},"\u641c\u7d22")),p=r.a.createElement(s.a,{type:"primary",icon:r.a.createElement(we.a,null),onClick:function(){return e.props.history.push("/product/addUpdate")}},"\u6dfb\u52a0");return r.a.createElement("div",null,r.a.createElement(be.a,{title:m,extra:p},r.a.createElement(Ee.a,{bordered:!0,pagination:{current:o,pageSize:c,showQuickJumper:!0,showSizeChanger:!0,total:l,onChange:this.getProductList},loading:n,rowKey:"_id",dataSource:a,columns:this.columns})))}}]),a}(n.Component),Ie=(a(356),a(268)),xe=a(1159),Re=(a(1143),a(516));function Ae(e){return new Promise((function(t,a){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return a(e)}}))}var Ne,Fe=function(e){Object(L.a)(a,e);var t=Object(_.a)(a);function a(e){var n;Object(N.a)(this,a),(n=t.call(this,e)).getImgs=function(){return n.state.fileList.map((function(e){return e.name}))},n.handleCancel=function(){return n.setState({previewVisible:!1})},n.handlePreview=function(){var e=Object(T.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.url||t.preview){e.next=4;break}return e.next=3,Ae(t.originFileObj);case 3:t.preview=e.sent;case 4:n.setState({previewImage:t.url||t.preview,previewVisible:!0,previewTitle:t.name||t.url.substring(t.url.lastIndexOf("/")+1)});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleChange=function(){var e=Object(T.a)(D.a.mark((function e(t){var a,r,o;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.file,r=t.fileList,console.log(a,r),"done"!==a.status){e.next=7;break}0===(o=a.response).status&&(r[r.length-1].name=o.data.name,r[r.length-1].url=o.data.url),e.next=12;break;case 7:if("removed"!==a.status){e.next=12;break}return e.next=10,j("deleteImgApi",{name:a.name});case 10:0===e.sent.status?w.b.success("\u5220\u9664\u6210\u529f"):w.b.error("\u5220\u9664\u5931\u8d25");case 12:n.setState({fileList:r});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var r=e.imgs,o=[];return r&&r.length>0&&(o=r.map((function(e,t){return{uid:-t,name:e,status:"done",url:"http://localhost:5000/upload/".concat(e)}}))),n.state={previewVisible:!1,previewImage:"",previewTitle:"",fileList:o},n}return Object(F.a)(a,[{key:"render",value:function(){var e=this.state,t=e.previewVisible,a=e.previewImage,n=e.fileList,o=e.previewTitle,c=r.a.createElement("div",null,r.a.createElement(we.a,null),r.a.createElement("div",{className:"ant-upload-text"},"Upload"));return r.a.createElement("div",{className:"clearfix"},r.a.createElement(Re.a,{action:"/manage/img/upload",listType:"picture-card",accept:"image/*",name:"image",fileList:n,onPreview:this.handlePreview,onChange:this.handleChange},n.length>=3?null:c),r.a.createElement(M.a,{visible:t,title:o,footer:null,onCancel:this.handleCancel},r.a.createElement("img",{alt:"example",style:{width:"100%"},src:a})))}}]),a}(n.Component),Le=a(504),_e=a(162),Pe=a(505),Ue=a.n(Pe),De=a(506),Te=a.n(De),Me=(a(821),function(e){Object(L.a)(a,e);var t=Object(_.a)(a);function a(e){var n;Object(N.a)(this,a),(n=t.call(this,e)).onEditorStateChange=function(e){n.setState({editorState:e})},n.getDetail=function(){return Ue()(Object(_e.convertToRaw)(n.state.editorState.getCurrentContent()))},n.uploadImageCallBack=function(e){return new Promise((function(t,a){var n=new XMLHttpRequest;n.open("POST","/manage/img/upload"),n.setRequestHeader("Authorization","Client-ID XXXXX");var r=new FormData;r.append("image",e),n.send(r),n.addEventListener("load",(function(){var e=JSON.parse(n.responseText);t({data:{link:e.data.url}})})),n.addEventListener("error",(function(){var e=JSON.parse(n.responseText);a(e)}))}))};var r=n.props.detail;if(console.log(r),r){var o=Te()(r);if(o){var c=_e.ContentState.createFromBlockArray(o.contentBlocks),l=_e.EditorState.createWithContent(c);n.state={editorState:l}}}else n.state={editorState:_e.EditorState.createEmpty()};return n}return Object(F.a)(a,[{key:"render",value:function(){var e=this.state.editorState;return r.a.createElement("div",null,r.a.createElement(Le.Editor,{editorState:e,wrapperClassName:"demo-wrapper",editorClassName:"demo-editor",editorStyle:{border:"1px solid #000",minHeight:200,paddingLeft:10},onEditorStateChange:this.onEditorStateChange,toolbar:{inline:{inDropdown:!0},list:{inDropdown:!0},textAlign:{inDropdown:!0},link:{inDropdown:!0},history:{inDropdown:!0},image:{uploadCallback:this.uploadImageCallBack,alt:{present:!0,mandatory:!0}}}}))}}]),a}(n.Component)),He=u.a.TextArea,qe={labelCol:{span:3},wrapperCol:{span:21}},ze=function(e,t,a){return 1*t>0?Promise.resolve():Promise.reject("\u4ef7\u683c\u5fc5\u987b\u5927\u4e8e0")},Ve=function(e){Object(L.a)(a,e);var t=Object(_.a)(a);function a(e){var n;return Object(N.a)(this,a),(n=t.call(this,e)).productFormRef=r.a.createRef(),n.uploadRef=r.a.createRef(),n.editorRef=r.a.createRef(),n.productInfo=n.props.location.state,n.getCategoryList=function(){var e=Object(T.a)(D.a.mark((function e(t){var a,r,o,c,l;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j("listCategoryApi",{parentId:t});case 2:if(a=e.sent,r=a.data,"0"!==t){e.next=24;break}if(n.setState({options:r}),!n.productInfo){e.next=22;break}if(n.productFormRef.current.setFieldsValue(n.productInfo),o=[],"0"!==n.productInfo.pcategoryId){e.next=13;break}o.push(n.productInfo.categoryId),e.next=21;break;case 13:return o.push(n.productInfo.pcategoryId),o.push(n.productInfo.categoryId),e.next=17,n.getCategoryList(n.productInfo.pcategoryId);case 17:c=e.sent,l=r.find((function(e){return e._id===n.productInfo.pcategoryId})),console.log(l),l.children=c;case 21:n.productFormRef.current.setFieldsValue({categorys:o});case 22:e.next=25;break;case 24:return e.abrupt("return",r);case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.onFinish=function(){n.productFormRef.current.validateFields().then((function(e){console.log(e),1===e.categorys.length?(e.pcategoryId="0",e.categoryId=e.categorys[0]):(e.pcategoryId=e.categorys[0],e.categoryId=e.categorys[1]),e.imgs=n.uploadRef.current.getImgs(),e.detail=n.editorRef.current.getDetail(),n.productInfo&&(e._id=n.productInfo._id);var t=n.productInfo?"updateProductApi":"addProductApi";j(t,e).then((function(e){console.log(e),0===e.status?(w.b.success("\u64cd\u4f5c\u6210\u529f"),n.props.history.goBack()):1===e.status&&w.b.error(e.msg)}))})).catch((function(e){console.log(e)}))},n.onChange=function(e,t){console.log(e,t)},n.loadData=function(){var e=Object(T.a)(D.a.mark((function e(t){var a,r;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),(a=t[t.length-1]).loading=!0,e.next=5,n.getCategoryList(a._id);case 5:r=e.sent,a.loading=!1,r&&r.length>0?a.children=r:a.isLeaf=!0,n.setState({options:Object(ie.a)(n.state.options)});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={options:[]},n}return Object(F.a)(a,[{key:"componentDidMount",value:function(){console.log(this.productInfo),this.getCategoryList("0")}},{key:"render",value:function(){var e=this,t=r.a.createElement("span",null,r.a.createElement(xe.a,{style:{color:"#1DA57A",fontSize:20,marginRight:10},onClick:function(){return e.props.history.goBack()}}),r.a.createElement("span",null,"\u6dfb\u52a0\u5546\u54c1")),a=this.productInfo||{},n=a.imgs,o=a.detail;return console.log(n,o),r.a.createElement(be.a,{title:t},r.a.createElement(m.a,Object.assign({},qe,{ref:this.productFormRef,initialValues:{},onFinish:this.onFinish}),r.a.createElement(m.a.Item,{name:"name",label:"\u5546\u54c1\u540d\u79f0",hasFeedback:!0,rules:[{required:!0,whitespace:!0,message:"Please input your Username!"}]},r.a.createElement(u.a,{placeholder:"\u8bf7\u8f93\u5165\u5546\u54c1\u540d\u79f0"})),r.a.createElement(m.a.Item,{name:"desc",label:"\u5546\u54c1\u63cf\u8ff0",hasFeedback:!0,rules:[{required:!0,whitespace:!0,message:"Please input your Username!"}]},r.a.createElement(He,{placeholder:"\u8bf7\u8f93\u5165\u5546\u54c1\u63cf\u8ff0",autoSize:{minRows:2,maxRows:6}})),r.a.createElement(m.a.Item,{name:"price",label:"\u5546\u54c1\u4ef7\u683c",rules:[{required:!0,validator:ze}]},r.a.createElement(u.a,{type:"number",placeholder:"\u8bf7\u8f93\u5165\u5546\u54c1\u4ef7\u683c",addonAfter:"\u5143"})),r.a.createElement(m.a.Item,{name:"categorys",label:"\u5546\u54c1\u5206\u7c7b",rules:[{required:!0,message:"Please input your Username!"}]},r.a.createElement(Ie.a,{fieldNames:{label:"name",value:"_id",children:"children"},options:this.state.options,loadData:this.loadData,onChange:this.onChange})),r.a.createElement(m.a.Item,{label:"\u5546\u54c1\u56fe\u7247",hasFeedback:!0,rules:[{required:!0,whitespace:!0,message:"Please input your Username!"}]},r.a.createElement(Fe,{ref:this.uploadRef,imgs:n})),r.a.createElement(m.a.Item,{label:"\u5546\u54c1\u8be6\u60c5",hasFeedback:!0,rules:[{required:!0,whitespace:!0,message:"Please input your Username!"}]},r.a.createElement(Me,{ref:this.editorRef,detail:o})),r.a.createElement(m.a.Item,{label:" ",colon:!1},r.a.createElement(s.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"\u63d0\u4ea4"))))}}]),a}(n.Component),Ke=function(e){Object(L.a)(a,e);var t=Object(_.a)(a);function a(){return Object(N.a)(this,a),t.apply(this,arguments)}return Object(F.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(i.d,null,r.a.createElement(i.b,{path:"/product",exact:!0,component:je}),r.a.createElement(i.b,{path:"/product/addUpdate",component:Ve}),r.a.createElement(i.a,{to:"/product"})))}}]),a}(n.Component),Ye={labelCol:{span:4},wrapperCol:{span:20}},Be=ve.a.Option,Je=function(e,t,a){return t?t.length<4?Promise.reject("\u5bc6\u7801\u957f\u5ea6\u4e0d\u80fd\u5c0f\u4e8e4\u4f4d"):t.length>12?Promise.reject("\u5bc6\u7801\u957f\u5ea6\u4e0d\u80fd\u5927\u4e8e12\u4f4d"):/^[a-zA-Z0-9_]+$/.test(t)?Promise.resolve():Promise.reject("\u5bc6\u7801\u5fc5\u987b\u662f\u82f1\u6587\u3001\u6570\u5b57\u6216\u4e0b\u5212\u7ebf\u7ec4\u6210"):Promise.reject("\u5bc6\u7801\u5fc5\u987b\u8f93\u5165")},We=function(e){Object(L.a)(a,e);var t=Object(_.a)(a);function a(){var e;Object(N.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).addFormRef=r.a.createRef(),e.treeFormRef=r.a.createRef(),e.state={loading:!1,usersList:[],user:{},rolesList:[],isShowAdd:!1},e.initColumns=function(){e.columns=[{title:"\u7528\u6237\u540d",dataIndex:"username"},{title:"\u90ae\u7bb1",dataIndex:"email"},{title:"\u7535\u8bdd",dataIndex:"phone"},{title:"\u6ce8\u518c\u65f6\u95f4",dataIndex:"create_time",render:function(e){return q()(e).format("YYYY-MM-DD HH:mm:ss")}},{title:"\u6240\u5c5e\u89d2\u8272",dataIndex:"role_id",render:function(t){return e.state.rolesList.find((function(e){return e._id===t})).name}},{title:"\u64cd\u4f5c",width:100,render:function(t){return r.a.createElement("span",null,r.a.createElement(s.a,{type:"link",onClick:function(){return e.showUpdate(t)}},"\u4fee\u6539"),r.a.createElement(s.a,{type:"link",onClick:function(){return e.handleDelete(t)}},"\u5220\u9664"))}}]},e.getUsersList=Object(T.a)(D.a.mark((function t(){var a;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j("listUserApi");case 2:a=t.sent,e.setState({usersList:a.data.users,rolesList:a.data.roles});case 4:case"end":return t.stop()}}),t)}))),e.showAdd=function(){e.setState({isShowAdd:!0,user:{}}),e.addFormRef.current.resetFields()},e.showUpdate=function(t){e.setState({user:t,isShowAdd:!0}),e.addFormRef.current.setFieldsValue(t)},e.handleSubmit=function(){e.addFormRef.current.validateFields().then(function(){var t=Object(T.a)(D.a.mark((function t(a){var n;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),n=e.state.user._id?"updateUserApi":"addUserApi",e.state.user._id&&(a._id=e.state.user._id),t.next=5,j(n,a);case 5:0===t.sent.status&&(e.setState({isShowAdd:!1,isShowSet:!1,loading:!1}),e.getUsersList());case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},e.handleDelete=function(t){M.a.confirm({title:"\u662f\u5426\u786e\u8ba4\u5220\u9664\u7528\u6237".concat(t.username),onOk:function(){var a=Object(T.a)(D.a.mark((function a(){return D.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,j("deleteUserApi",{userId:t._id});case 2:0===a.sent.status&&(w.b.success("\u5220\u9664\u7528\u6237\u6210\u529f"),e.getUsersList());case 4:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}()})},e}return Object(F.a)(a,[{key:"componentDidMount",value:function(){this.initColumns(),this.getUsersList()}},{key:"render",value:function(){var e=this,t=this.state,a=t.usersList,n=t.loading,o=t.isShowAdd,c=t.rolesList,l=t.user,i=r.a.createElement(s.a,{type:"primary",onClick:this.showAdd},r.a.createElement(we.a,null),"\u521b\u5efa\u7528\u6237");return r.a.createElement("div",null,r.a.createElement(be.a,{title:i},r.a.createElement(Ee.a,{bordered:!0,loading:n,rowKey:"_id",dataSource:a,columns:this.columns,pagination:{defaultPageSize:10,showQuickJumper:!0,showSizeChanger:!0}}),r.a.createElement(M.a,{title:l._id?"\u4fee\u6539\u7528\u6237":"\u521b\u5efa\u7528\u6237",forceRender:!0,visible:o,onOk:this.handleSubmit,onCancel:function(){return e.setState({isShowAdd:!1})}},r.a.createElement(m.a,Object.assign({},Ye,{ref:this.addFormRef,initialValues:{}}),r.a.createElement(m.a.Item,{label:"\u7528\u6237\u540d",name:"username",hasFeedback:!0,rules:[{required:!0,whitespace:!0,message:"Please input your Username!"}]},r.a.createElement(u.a,{placeholder:"Username"})),l._id?null:r.a.createElement(m.a.Item,{label:"\u5bc6\u7801",name:"password",hasFeedback:!0,rules:[{required:!0,whitespace:!0,validator:Je}]},r.a.createElement(u.a.Password,{placeholder:"Password"})),r.a.createElement(m.a.Item,{label:"\u624b\u673a\u53f7",name:"phone",hasFeedback:!0,rules:[{required:!0,whitespace:!0,message:"Please input your Username!"}]},r.a.createElement(u.a,{placeholder:"Phone"})),r.a.createElement(m.a.Item,{label:"\u90ae\u7bb1",name:"email",hasFeedback:!0,rules:[{required:!0,whitespace:!0,message:"Please input your Username!"}]},r.a.createElement(u.a,{placeholder:"Email"})),r.a.createElement(m.a.Item,{label:"\u89d2\u8272",name:"role_id",hasFeedback:!0,rules:[{required:!0,whitespace:!0,message:"Please input your Username!"}]},r.a.createElement(ve.a,{placeholder:"\u8bf7\u9009\u62e9"},c.map((function(e){return r.a.createElement(Be,{value:e._id,key:e._id},e.name)}))))))))}}]),a}(n.Component),Xe=(a(824),a(517)),Qe=m.a.Item,$e=function(e){Object(L.a)(a,e);var t=Object(_.a)(a);function a(e){var n;Object(N.a)(this,a),(n=t.call(this,e)).onCheck=function(e){console.log(e),n.setState({checkedKeys:e})},n.getMenus=function(){return n.state.checkedKeys};var r=(n.props.role||{}).menus;return n.state={checkedKeys:r||[]},n}return Object(F.a)(a,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({checkedKeys:e.role.menus})}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props.role,t=this.state.checkedKeys;return r.a.createElement("div",null,r.a.createElement(Qe,{label:"\u89d2\u8272\u540d\u79f0"},r.a.createElement(u.a,{value:e.name,disabled:!0})),r.a.createElement(Qe,{label:"\u5e73\u53f0\u6743\u9650"},r.a.createElement(Xe.a,{checkable:!0,defaultExpandAll:!0,checkedKeys:t,treeData:ne,onCheck:this.onCheck})))}}]),a}(n.Component),Ze=function(e){Object(L.a)(a,e);var t=Object(_.a)(a);function a(){var e;Object(N.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).addFormRef=r.a.createRef(),e.treeFormRef=r.a.createRef(),e.state={loading:!1,rolesList:[],role:{},isShowAdd:!1,isShowSet:!1},e.initCloums=function(){e.columns=[{title:"\u89d2\u8272\u540d\u79f0",dataIndex:"name"},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"create_time",render:function(e){return q()(e).format("YYYY-MM-DD HH:mm:ss")}},{title:"\u6388\u6743\u65f6\u95f4",dataIndex:"auth_time",render:function(e){return e?q()(e).format("YYYY-MM-DD HH:mm:ss"):""}},{title:"\u6388\u6743\u4eba",dataIndex:"auth_name"}]},e.getRolesList=Object(T.a)(D.a.mark((function t(){var a;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j("listRoleApi");case 2:a=t.sent,e.setState({rolesList:a.data});case 4:case"end":return t.stop()}}),t)}))),e.handleDelete=function(t){M.a.confirm({title:"\u662f\u5426\u786e\u8ba4\u5220\u9664\u89d2\u8272".concat(t.name),onOk:function(){var a=Object(T.a)(D.a.mark((function a(){return D.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,j("deleteRoleApi",{_id:t._id});case 2:0===a.sent.status&&(w.b.success("\u5220\u9664\u7528\u6237\u6210\u529f"),e.getUsersList());case 4:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}()})},e.createRole=function(){e.addFormRef.current.validateFields().then(function(){var t=Object(T.a)(D.a.mark((function t(a){return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j("addRoleApi",a);case 2:0===t.sent.status&&(e.setState({isShowAdd:!1}),e.getRolesList());case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},e.setRole=Object(T.a)(D.a.mark((function t(){var a,n;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state.role,n=e.treeFormRef.current.getMenus(),a.menus=n,a.auth_name=e.props.userInfos&&e.props.userInfos.username,t.next=6,j("updateRoleApi",a);case 6:0===t.sent.status&&(w.b.success("\u8bbe\u7f6e\u89d2\u8272\u6743\u9650\u6210\u529f"),e.setState((function(e){return{rolesList:Object(ie.a)(e.rolesList),isShowSet:!1}})));case 8:case"end":return t.stop()}}),t)}))),e.onRow=function(t){return{onClick:function(a){e.setState({role:t})}}},e}return Object(F.a)(a,[{key:"componentDidMount",value:function(){this.initCloums(),this.getRolesList()}},{key:"render",value:function(){var e=this,t=this.state,a=t.rolesList,n=t.role,o=t.loading,c=t.isShowAdd,l=t.isShowSet,i=r.a.createElement(r.a.Fragment,null,r.a.createElement(s.a,{type:"primary",onClick:function(){return e.setState({isShowAdd:!0})}},r.a.createElement(we.a,null),"\u521b\u5efa\u89d2\u8272"),"\xa0\xa0",r.a.createElement(s.a,{type:"primary",onClick:function(){return e.setState({isShowSet:!0})},disabled:!n._id},"\u8bbe\u7f6e\u89d2\u8272\u6743\u9650"));return r.a.createElement("div",null,r.a.createElement(be.a,{title:i},r.a.createElement(Ee.a,{bordered:!0,loading:o,rowKey:"_id",rowSelection:{type:"radio",selectedRowKeys:[n._id],onSelect:function(t){e.setState({role:t})}},dataSource:a,columns:this.columns,pagination:{defaultPageSize:10,showQuickJumper:!0,showSizeChanger:!0},onRow:this.onRow}),r.a.createElement(M.a,{title:"\u521b\u5efa\u89d2\u8272",visible:c,onOk:this.createRole,onCancel:function(){return e.setState({isShowAdd:!1})}},r.a.createElement(m.a,{ref:this.addFormRef,initialValues:{roleName:""}},r.a.createElement(m.a.Item,{name:"roleName",label:"\u89d2\u8272\u540d\u79f0",rules:[{required:!0,whitespace:!0,message:"\u89d2\u8272\u540d\u79f0\u5fc5\u987b\u586b\u5199"}]},r.a.createElement(u.a,{placeholder:"\u8bf7\u8f93\u5165\u89d2\u8272\u540d\u79f0"})))),r.a.createElement(M.a,{title:"\u8bbe\u7f6e\u89d2\u8272\u6743\u9650",visible:l,onOk:this.setRole,onCancel:function(){return e.setState({isShowSet:!1})}},r.a.createElement($e,{ref:this.treeFormRef,role:n}))))}}]),a}(n.Component),Ge=Object(E.b)((function(e){return{userInfos:e.user}}),{})(Ze),et=a(1158),tt=a(180),at=a.n(tt),nt=function(e){Object(L.a)(a,e);var t=Object(_.a)(a);function a(e){var n;return Object(N.a)(this,a),(n=t.call(this,e)).update=function(){n.setState((function(e){return{sales:e.sales.map((function(e){return e-1})),stores:e.stores.reduce((function(e,t){return e.push(t+1),e}),[])}}))},n.getOption=function(e,t){return{title:{text:"ECharts \u5165\u95e8\u793a\u4f8b"},tooltip:{},legend:{data:["\u9500\u91cf","\u5e93\u5b58"]},xAxis:{data:["\u886c\u886b","\u7f8a\u6bdb\u886b","\u96ea\u7eba\u886b","\u88e4\u5b50","\u9ad8\u8ddf\u978b","\u889c\u5b50"]},yAxis:{},series:[{name:"\u9500\u91cf",type:"bar",data:e},{name:"\u5e93\u5b58",type:"bar",data:t}]}},n.state={sales:[12,23,14,23,36,18],stores:[15,33,18,23,26,12]},n}return Object(F.a)(a,[{key:"render",value:function(){var e=this.state,t=e.sales,a=e.stores,n=r.a.createElement(s.a,{type:"primary",icon:r.a.createElement(et.a,null),onClick:this.update},"\u66f4\u65b0");return r.a.createElement("div",null,r.a.createElement(be.a,{title:"\u67f1\u72b6\u56fe",extra:n},r.a.createElement(at.a,{option:this.getOption(t,a)})))}}]),a}(n.Component),rt=function(e){Object(L.a)(a,e);var t=Object(_.a)(a);function a(e){var n;return Object(N.a)(this,a),(n=t.call(this,e)).update=function(){n.setState((function(e){return{sales:e.sales.map((function(e){return e-1})),stores:e.stores.reduce((function(e,t){return e.push(t+1),e}),[])}}))},n.getOption=function(e,t){return{title:{text:"ECharts \u5165\u95e8\u793a\u4f8b"},tooltip:{},legend:{data:["\u9500\u91cf","\u5e93\u5b58"]},xAxis:{data:["\u886c\u886b","\u7f8a\u6bdb\u886b","\u96ea\u7eba\u886b","\u88e4\u5b50","\u9ad8\u8ddf\u978b","\u889c\u5b50"]},yAxis:{},series:[{name:"\u9500\u91cf",type:"line",data:e},{name:"\u5e93\u5b58",type:"line",data:t}]}},n.state={sales:[12,23,14,23,36,18],stores:[15,33,18,23,26,12]},n}return Object(F.a)(a,[{key:"render",value:function(){var e=this.state,t=e.sales,a=e.stores,n=r.a.createElement(s.a,{type:"primary",icon:r.a.createElement(et.a,null),onClick:this.update},"\u66f4\u65b0");return r.a.createElement("div",null,r.a.createElement(be.a,{title:"\u6298\u7ebf\u56fe",extra:n},r.a.createElement(at.a,{option:this.getOption(t,a)})))}}]),a}(n.Component),ot=function(e){Object(L.a)(a,e);var t=Object(_.a)(a);function a(e){var n;return Object(N.a)(this,a),(n=t.call(this,e)).update=function(){n.setState({sales:[22,13,24,33,16,28],stores:[25,23,38,13,36,22]})},n.getOption=function(e,t){return{title:{text:"\u67d0\u7ad9\u70b9\u7528\u6237\u8bbf\u95ee\u6765\u6e90",subtext:"\u7eaf\u5c5e\u865a\u6784",left:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:["\u76f4\u63a5\u8bbf\u95ee","\u90ae\u4ef6\u8425\u9500","\u8054\u76df\u5e7f\u544a","\u89c6\u9891\u5e7f\u544a","\u641c\u7d22\u5f15\u64ce"]},series:[{name:"\u8bbf\u95ee\u6765\u6e90",type:"pie",radius:"55%",center:["50%","60%"],data:[{value:335,name:"\u76f4\u63a5\u8bbf\u95ee"},{value:310,name:"\u90ae\u4ef6\u8425\u9500"},{value:234,name:"\u8054\u76df\u5e7f\u544a"},{value:135,name:"\u89c6\u9891\u5e7f\u544a"},{value:1548,name:"\u641c\u7d22\u5f15\u64ce"}],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}},n.state={sales:[12,23,14,23,36,18],stores:[15,33,18,23,26,12]},n}return Object(F.a)(a,[{key:"render",value:function(){var e=r.a.createElement(s.a,{type:"primary",icon:r.a.createElement(et.a,null),onClick:this.update},"\u66f4\u65b0");return r.a.createElement("div",null,r.a.createElement(be.a,{title:"\u997c\u72b6\u56fe",extra:e},r.a.createElement(at.a,{option:this.getOption()})))}}]),a}(n.Component),ct=P.a.Content,lt=P.a.Footer,it=P.a.Sider,st=function(e){Object(L.a)(a,e);var t=Object(_.a)(a);function a(e){var n;return Object(N.a)(this,a),(n=t.call(this,e)).currentOpen="",n.onCollapse=function(e){console.log(e),n.setState({collapsed:e})},n.state={collapsed:!1},n}return Object(F.a)(a,[{key:"render",value:function(){var e=this.props.userInfos||{};return e&&e._id?r.a.createElement("div",{className:"admin-box"},r.a.createElement(P.a,{style:{minHeight:"100%"}},r.a.createElement(it,{collapsible:!0,collapsed:this.state.collapsed,onCollapse:this.onCollapse,style:{overflow:"auto",height:"100vh",position:"fixed",left:0}},r.a.createElement(l.b,{to:"/",className:"login-header"},r.a.createElement("img",{src:y.a,alt:"logo"}),r.a.createElement("h1",null,"\u7ba1\u7406\u7cfb\u7edf")),r.a.createElement(ce,this.props)),r.a.createElement(P.a,{className:this.state.collapsed?"side-fold":"side-nofold"},r.a.createElement(J,this.props),r.a.createElement(ct,{style:{margin:"0 16px 0",overflow:"initial"}},r.a.createElement(me,{currentPath:this.props.location.pathname}),r.a.createElement("div",{className:"site-layout-background",style:{background:"#fff"}},r.a.createElement(i.d,null,r.a.createElement(i.b,{path:"/",exact:!0,component:ge}),r.a.createElement(i.b,{path:"/category",component:Oe}),r.a.createElement(i.b,{path:"/product",component:Ke}),r.a.createElement(i.b,{path:"/user",component:We}),r.a.createElement(i.b,{path:"/role",component:Ge}),r.a.createElement(i.b,{path:"/bar",component:nt}),r.a.createElement(i.b,{path:"/line",component:rt}),r.a.createElement(i.b,{path:"/pie",component:ot}),r.a.createElement(i.a,{to:"/"})))),r.a.createElement(lt,{style:{textAlign:"center"}},"Ant Design \xa92018 Created by Ant UED")))):r.a.createElement(i.a,{to:"/login"})}}]),a}(n.Component),ut=Object(E.b)((function(e){return{userInfos:e.user}}),{})(st),dt=function(e){var t=e.options,a=e.onChange,o=Object(n.useState)([]),c=Object(p.a)(o,2),l=c[0],i=c[1];return Object(n.useEffect)((function(){i(Object(ie.a)(t))}),[t]),r.a.createElement(Ie.a,{options:l,loadData:function(e){var n=e[e.length-1];n.loading=!0,setTimeout((function(){n.loading=!1,n.children=[{label:"".concat(n.label," Dynamic 1"),value:"dynamic1"},{label:"".concat(n.label," Dynamic 2"),value:"dynamic2"}],i(Object(ie.a)(t)),a&&a()}),1e3)},changeOnSelect:!0})},mt=function(){var e=Object(n.useState)(0),t=Object(p.a)(e,2),a=t[0],o=t[1];return Object(n.useEffect)((function(){return 36e5===a?clearTimeout(Ne):Ne=setTimeout((function(){return o((function(e){return e+1e3}))}),1e3),function(){clearTimeout(Ne)}}),[a]),r.a.createElement("div",{style:{color:a>=6e4?"red":"green"}},r.a.createElement("span",null,q()(a).format("mm:ss")))},pt=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(mt,null),r.a.createElement(dt,{options:[{value:"he_cheng",label:"\u5408\u6210\u57df",isLeaf:!1},{value:"\u82b1\u5457\u57df",label:"hua_bei",isLeaf:!1}]}))};var ft=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(i.d,null,r.a.createElement(i.b,{path:"/login",component:A}),r.a.createElement(i.b,{path:"/timer",component:pt}),r.a.createElement(i.b,{path:"/",component:ut})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ht=a(136),gt=a(514);var bt=JSON.parse(localStorage.userInfos||"{}");var Et=Object(ht.combineReducers)({count:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"increase":return e+t.data;case"decrease":return e-t.data;default:return e}},headTitle:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"\u9996\u9875",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"set_head_title":return t.data;default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"set_user":return t.data;case"clear_user":return{};default:return e}}}),vt=a(515),yt=Object(ht.createStore)(Et,Object(gt.composeWithDevTools)(Object(ht.applyMiddleware)(vt.a)));c.a.render(r.a.createElement(l.a,null,r.a.createElement(E.a,{store:yt},r.a.createElement(ft,null)),","),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},251:function(e,t,a){e.exports=a.p+"static/media/mamba.a85fd5e8.png"},520:function(e,t,a){e.exports=a(1142)},525:function(e,t,a){},526:function(e,t,a){},538:function(e,t,a){},664:function(e,t,a){},687:function(e,t,a){}},[[520,1,2]]]);
//# sourceMappingURL=main.d91f73ca.chunk.js.map